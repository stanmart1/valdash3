var $o=Object.defineProperty;var Ho=(i,e,t)=>e in i?$o(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var rt=(i,e,t)=>Ho(i,typeof e!="symbol"?e+"":e,t);import{r as jo,c as Bt,g as tn,b as H,a as Ei,_ as Go,d as Ai,w as Yo,e as Zo,f as xi,h as Jo,i as Jt,j as Ri,k as Bi,n as Xo,F as Mi,l as Hr,m as tr,o as bt,p as Js,q as On,s as Qo,t as qr,u as ea,v as ta,x as Xs,y as ra,z as Qs,A as na,B as Ur,C as sa,D as ia,E as oa,G as aa,H as Et,I as kr,J as ei,K as ti}from"./wallet-adapters-DPvjAAl-.js";var os={exports:{}};os.exports;(function(i){(function(e,t){function r(d,o){if(!d)throw new Error(o||"Assertion failed")}function s(d,o){d.super_=o;var u=function(){};u.prototype=o.prototype,d.prototype=new u,d.prototype.constructor=d}function n(d,o,u){if(n.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((o==="le"||o==="be")&&(u=o,o=10),this._init(d||0,o||10,u||"be"))}typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=jo.Buffer}catch{}n.isBN=function(o){return o instanceof n?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===n.wordSize&&Array.isArray(o.words)},n.max=function(o,u){return o.cmp(u)>0?o:u},n.min=function(o,u){return o.cmp(u)<0?o:u},n.prototype._init=function(o,u,h){if(typeof o=="number")return this._initNumber(o,u,h);if(typeof o=="object")return this._initArray(o,u,h);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),o=o.toString().replace(/\s+/g,"");var p=0;o[0]==="-"&&(p++,this.negative=1),p<o.length&&(u===16?this._parseHex(o,p,h):(this._parseBase(o,u,p),h==="le"&&this._initArray(this.toArray(),u,h)))},n.prototype._initNumber=function(o,u,h){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),u,h)},n.prototype._initArray=function(o,u,h){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var y,b,k=0;if(h==="be")for(p=o.length-1,y=0;p>=0;p-=3)b=o[p]|o[p-1]<<8|o[p-2]<<16,this.words[y]|=b<<k&67108863,this.words[y+1]=b>>>26-k&67108863,k+=24,k>=26&&(k-=26,y++);else if(h==="le")for(p=0,y=0;p<o.length;p+=3)b=o[p]|o[p+1]<<8|o[p+2]<<16,this.words[y]|=b<<k&67108863,this.words[y+1]=b>>>26-k&67108863,k+=24,k>=26&&(k-=26,y++);return this._strip()};function l(d,o){var u=d.charCodeAt(o);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;r(!1,"Invalid character in "+d)}function f(d,o,u){var h=l(d,u);return u-1>=o&&(h|=l(d,u-1)<<4),h}n.prototype._parseHex=function(o,u,h){this.length=Math.ceil((o.length-u)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var y=0,b=0,k;if(h==="be")for(p=o.length-1;p>=u;p-=2)k=f(o,u,p)<<y,this.words[b]|=k&67108863,y>=18?(y-=18,b+=1,this.words[b]|=k>>>26):y+=8;else{var g=o.length-u;for(p=g%2===0?u+1:u;p<o.length;p+=2)k=f(o,u,p)<<y,this.words[b]|=k&67108863,y>=18?(y-=18,b+=1,this.words[b]|=k>>>26):y+=8}this._strip()};function w(d,o,u,h){for(var p=0,y=0,b=Math.min(d.length,u),k=o;k<b;k++){var g=d.charCodeAt(k)-48;p*=h,g>=49?y=g-49+10:g>=17?y=g-17+10:y=g,r(g>=0&&y<h,"Invalid character"),p+=y}return p}n.prototype._parseBase=function(o,u,h){this.words=[0],this.length=1;for(var p=0,y=1;y<=67108863;y*=u)p++;p--,y=y/u|0;for(var b=o.length-h,k=b%p,g=Math.min(b,b-k)+h,c=0,m=h;m<g;m+=p)c=w(o,m,m+p,u),this.imuln(y),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(k!==0){var U=1;for(c=w(o,m,o.length,u),m=0;m<k;m++)U*=u;this.imuln(U),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},n.prototype.copy=function(o){o.words=new Array(this.length);for(var u=0;u<this.length;u++)o.words[u]=this.words[u];o.length=this.length,o.negative=this.negative,o.red=this.red};function v(d,o){d.words=o.words,d.length=o.length,d.negative=o.negative,d.red=o.red}if(n.prototype._move=function(o){v(o,this)},n.prototype.clone=function(){var o=new n(null);return this.copy(o),o},n.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{n.prototype.inspect=A}else n.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(o,u){o=o||10,u=u|0||1;var h;if(o===16||o==="hex"){h="";for(var p=0,y=0,b=0;b<this.length;b++){var k=this.words[b],g=((k<<p|y)&16777215).toString(16);y=k>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),y!==0||b!==this.length-1?h=B[6-g.length]+g+h:h=g+h}for(y!==0&&(h=y.toString(16)+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(o===(o|0)&&o>=2&&o<=36){var c=S[o],m=E[o];h="";var U=this.clone();for(U.negative=0;!U.isZero();){var C=U.modrn(m).toString(o);U=U.idivn(m),U.isZero()?h=C+h:h=B[c-C.length]+C+h}for(this.isZero()&&(h="0"+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},n.prototype.toJSON=function(){return this.toString(16,2)},a&&(n.prototype.toBuffer=function(o,u){return this.toArrayLike(a,o,u)}),n.prototype.toArray=function(o,u){return this.toArrayLike(Array,o,u)};var R=function(o,u){return o.allocUnsafe?o.allocUnsafe(u):new o(u)};n.prototype.toArrayLike=function(o,u,h){this._strip();var p=this.byteLength(),y=h||Math.max(1,p);r(p<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0");var b=R(o,y),k=u==="le"?"LE":"BE";return this["_toArrayLike"+k](b,p),b},n.prototype._toArrayLikeLE=function(o,u){for(var h=0,p=0,y=0,b=0;y<this.length;y++){var k=this.words[y]<<b|p;o[h++]=k&255,h<o.length&&(o[h++]=k>>8&255),h<o.length&&(o[h++]=k>>16&255),b===6?(h<o.length&&(o[h++]=k>>24&255),p=0,b=0):(p=k>>>24,b+=2)}if(h<o.length)for(o[h++]=p;h<o.length;)o[h++]=0},n.prototype._toArrayLikeBE=function(o,u){for(var h=o.length-1,p=0,y=0,b=0;y<this.length;y++){var k=this.words[y]<<b|p;o[h--]=k&255,h>=0&&(o[h--]=k>>8&255),h>=0&&(o[h--]=k>>16&255),b===6?(h>=0&&(o[h--]=k>>24&255),p=0,b=0):(p=k>>>24,b+=2)}if(h>=0)for(o[h--]=p;h>=0;)o[h--]=0},Math.clz32?n.prototype._countBits=function(o){return 32-Math.clz32(o)}:n.prototype._countBits=function(o){var u=o,h=0;return u>=4096&&(h+=13,u>>>=13),u>=64&&(h+=7,u>>>=7),u>=8&&(h+=4,u>>>=4),u>=2&&(h+=2,u>>>=2),h+u},n.prototype._zeroBits=function(o){if(o===0)return 26;var u=o,h=0;return u&8191||(h+=13,u>>>=13),u&127||(h+=7,u>>>=7),u&15||(h+=4,u>>>=4),u&3||(h+=2,u>>>=2),u&1||h++,h},n.prototype.bitLength=function(){var o=this.words[this.length-1],u=this._countBits(o);return(this.length-1)*26+u};function x(d){for(var o=new Array(d.bitLength()),u=0;u<o.length;u++){var h=u/26|0,p=u%26;o[u]=d.words[h]>>>p&1}return o}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,u=0;u<this.length;u++){var h=this._zeroBits(this.words[u]);if(o+=h,h!==26)break}return o},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},n.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var u=0;u<o.length;u++)this.words[u]=this.words[u]|o.words[u];return this._strip()},n.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},n.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},n.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},n.prototype.iuand=function(o){var u;this.length>o.length?u=o:u=this;for(var h=0;h<u.length;h++)this.words[h]=this.words[h]&o.words[h];return this.length=u.length,this._strip()},n.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},n.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},n.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},n.prototype.iuxor=function(o){var u,h;this.length>o.length?(u=this,h=o):(u=o,h=this);for(var p=0;p<h.length;p++)this.words[p]=u.words[p]^h.words[p];if(this!==u)for(;p<u.length;p++)this.words[p]=u.words[p];return this.length=u.length,this._strip()},n.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},n.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},n.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},n.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var u=Math.ceil(o/26)|0,h=o%26;this._expand(u),h>0&&u--;for(var p=0;p<u;p++)this.words[p]=~this.words[p]&67108863;return h>0&&(this.words[p]=~this.words[p]&67108863>>26-h),this._strip()},n.prototype.notn=function(o){return this.clone().inotn(o)},n.prototype.setn=function(o,u){r(typeof o=="number"&&o>=0);var h=o/26|0,p=o%26;return this._expand(h+1),u?this.words[h]=this.words[h]|1<<p:this.words[h]=this.words[h]&~(1<<p),this._strip()},n.prototype.iadd=function(o){var u;if(this.negative!==0&&o.negative===0)return this.negative=0,u=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,u=this.isub(o),o.negative=1,u._normSign();var h,p;this.length>o.length?(h=this,p=o):(h=o,p=this);for(var y=0,b=0;b<p.length;b++)u=(h.words[b]|0)+(p.words[b]|0)+y,this.words[b]=u&67108863,y=u>>>26;for(;y!==0&&b<h.length;b++)u=(h.words[b]|0)+y,this.words[b]=u&67108863,y=u>>>26;if(this.length=h.length,y!==0)this.words[this.length]=y,this.length++;else if(h!==this)for(;b<h.length;b++)this.words[b]=h.words[b];return this},n.prototype.add=function(o){var u;return o.negative!==0&&this.negative===0?(o.negative=0,u=this.sub(o),o.negative^=1,u):o.negative===0&&this.negative!==0?(this.negative=0,u=o.sub(this),this.negative=1,u):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},n.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var u=this.iadd(o);return o.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var h=this.cmp(o);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,y;h>0?(p=this,y=o):(p=o,y=this);for(var b=0,k=0;k<y.length;k++)u=(p.words[k]|0)-(y.words[k]|0)+b,b=u>>26,this.words[k]=u&67108863;for(;b!==0&&k<p.length;k++)u=(p.words[k]|0)+b,b=u>>26,this.words[k]=u&67108863;if(b===0&&k<p.length&&p!==this)for(;k<p.length;k++)this.words[k]=p.words[k];return this.length=Math.max(this.length,k),p!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(o){return this.clone().isub(o)};function P(d,o,u){u.negative=o.negative^d.negative;var h=d.length+o.length|0;u.length=h,h=h-1|0;var p=d.words[0]|0,y=o.words[0]|0,b=p*y,k=b&67108863,g=b/67108864|0;u.words[0]=k;for(var c=1;c<h;c++){for(var m=g>>>26,U=g&67108863,C=Math.min(c,o.length-1),K=Math.max(0,c-d.length+1);K<=C;K++){var te=c-K|0;p=d.words[te]|0,y=o.words[K]|0,b=p*y+U,m+=b/67108864|0,U=b&67108863}u.words[c]=U|0,g=m|0}return g!==0?u.words[c]=g|0:u.length--,u._strip()}var V=function(o,u,h){var p=o.words,y=u.words,b=h.words,k=0,g,c,m,U=p[0]|0,C=U&8191,K=U>>>13,te=p[1]|0,Y=te&8191,j=te>>>13,nt=p[2]|0,ge=nt&8191,be=nt>>>13,Ar=p[3]|0,Se=Ar&8191,_e=Ar>>>13,Os=p[4]|0,Ie=Os&8191,Ee=Os>>>13,Ns=p[5]|0,Ae=Ns&8191,xe=Ns>>>13,zs=p[6]|0,Re=zs&8191,Be=zs>>>13,Us=p[7]|0,Me=Us&8191,Pe=Us>>>13,Ks=p[8]|0,Te=Ks&8191,Le=Ks>>>13,Fs=p[9]|0,Ce=Fs&8191,Oe=Fs>>>13,Ws=y[0]|0,Ne=Ws&8191,ze=Ws>>>13,Ds=y[1]|0,Ue=Ds&8191,Ke=Ds>>>13,qs=y[2]|0,Fe=qs&8191,We=qs>>>13,Vs=y[3]|0,De=Vs&8191,qe=Vs>>>13,$s=y[4]|0,Ve=$s&8191,$e=$s>>>13,Hs=y[5]|0,He=Hs&8191,je=Hs>>>13,js=y[6]|0,Ge=js&8191,Ye=js>>>13,Gs=y[7]|0,Ze=Gs&8191,Je=Gs>>>13,Ys=y[8]|0,Xe=Ys&8191,Qe=Ys>>>13,Zs=y[9]|0,et=Zs&8191,tt=Zs>>>13;h.negative=o.negative^u.negative,h.length=19,g=Math.imul(C,Ne),c=Math.imul(C,ze),c=c+Math.imul(K,Ne)|0,m=Math.imul(K,ze);var yn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(yn>>>26)|0,yn&=67108863,g=Math.imul(Y,Ne),c=Math.imul(Y,ze),c=c+Math.imul(j,Ne)|0,m=Math.imul(j,ze),g=g+Math.imul(C,Ue)|0,c=c+Math.imul(C,Ke)|0,c=c+Math.imul(K,Ue)|0,m=m+Math.imul(K,Ke)|0;var mn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(mn>>>26)|0,mn&=67108863,g=Math.imul(ge,Ne),c=Math.imul(ge,ze),c=c+Math.imul(be,Ne)|0,m=Math.imul(be,ze),g=g+Math.imul(Y,Ue)|0,c=c+Math.imul(Y,Ke)|0,c=c+Math.imul(j,Ue)|0,m=m+Math.imul(j,Ke)|0,g=g+Math.imul(C,Fe)|0,c=c+Math.imul(C,We)|0,c=c+Math.imul(K,Fe)|0,m=m+Math.imul(K,We)|0;var bn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(bn>>>26)|0,bn&=67108863,g=Math.imul(Se,Ne),c=Math.imul(Se,ze),c=c+Math.imul(_e,Ne)|0,m=Math.imul(_e,ze),g=g+Math.imul(ge,Ue)|0,c=c+Math.imul(ge,Ke)|0,c=c+Math.imul(be,Ue)|0,m=m+Math.imul(be,Ke)|0,g=g+Math.imul(Y,Fe)|0,c=c+Math.imul(Y,We)|0,c=c+Math.imul(j,Fe)|0,m=m+Math.imul(j,We)|0,g=g+Math.imul(C,De)|0,c=c+Math.imul(C,qe)|0,c=c+Math.imul(K,De)|0,m=m+Math.imul(K,qe)|0;var wn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(wn>>>26)|0,wn&=67108863,g=Math.imul(Ie,Ne),c=Math.imul(Ie,ze),c=c+Math.imul(Ee,Ne)|0,m=Math.imul(Ee,ze),g=g+Math.imul(Se,Ue)|0,c=c+Math.imul(Se,Ke)|0,c=c+Math.imul(_e,Ue)|0,m=m+Math.imul(_e,Ke)|0,g=g+Math.imul(ge,Fe)|0,c=c+Math.imul(ge,We)|0,c=c+Math.imul(be,Fe)|0,m=m+Math.imul(be,We)|0,g=g+Math.imul(Y,De)|0,c=c+Math.imul(Y,qe)|0,c=c+Math.imul(j,De)|0,m=m+Math.imul(j,qe)|0,g=g+Math.imul(C,Ve)|0,c=c+Math.imul(C,$e)|0,c=c+Math.imul(K,Ve)|0,m=m+Math.imul(K,$e)|0;var kn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(kn>>>26)|0,kn&=67108863,g=Math.imul(Ae,Ne),c=Math.imul(Ae,ze),c=c+Math.imul(xe,Ne)|0,m=Math.imul(xe,ze),g=g+Math.imul(Ie,Ue)|0,c=c+Math.imul(Ie,Ke)|0,c=c+Math.imul(Ee,Ue)|0,m=m+Math.imul(Ee,Ke)|0,g=g+Math.imul(Se,Fe)|0,c=c+Math.imul(Se,We)|0,c=c+Math.imul(_e,Fe)|0,m=m+Math.imul(_e,We)|0,g=g+Math.imul(ge,De)|0,c=c+Math.imul(ge,qe)|0,c=c+Math.imul(be,De)|0,m=m+Math.imul(be,qe)|0,g=g+Math.imul(Y,Ve)|0,c=c+Math.imul(Y,$e)|0,c=c+Math.imul(j,Ve)|0,m=m+Math.imul(j,$e)|0,g=g+Math.imul(C,He)|0,c=c+Math.imul(C,je)|0,c=c+Math.imul(K,He)|0,m=m+Math.imul(K,je)|0;var vn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(vn>>>26)|0,vn&=67108863,g=Math.imul(Re,Ne),c=Math.imul(Re,ze),c=c+Math.imul(Be,Ne)|0,m=Math.imul(Be,ze),g=g+Math.imul(Ae,Ue)|0,c=c+Math.imul(Ae,Ke)|0,c=c+Math.imul(xe,Ue)|0,m=m+Math.imul(xe,Ke)|0,g=g+Math.imul(Ie,Fe)|0,c=c+Math.imul(Ie,We)|0,c=c+Math.imul(Ee,Fe)|0,m=m+Math.imul(Ee,We)|0,g=g+Math.imul(Se,De)|0,c=c+Math.imul(Se,qe)|0,c=c+Math.imul(_e,De)|0,m=m+Math.imul(_e,qe)|0,g=g+Math.imul(ge,Ve)|0,c=c+Math.imul(ge,$e)|0,c=c+Math.imul(be,Ve)|0,m=m+Math.imul(be,$e)|0,g=g+Math.imul(Y,He)|0,c=c+Math.imul(Y,je)|0,c=c+Math.imul(j,He)|0,m=m+Math.imul(j,je)|0,g=g+Math.imul(C,Ge)|0,c=c+Math.imul(C,Ye)|0,c=c+Math.imul(K,Ge)|0,m=m+Math.imul(K,Ye)|0;var Sn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,g=Math.imul(Me,Ne),c=Math.imul(Me,ze),c=c+Math.imul(Pe,Ne)|0,m=Math.imul(Pe,ze),g=g+Math.imul(Re,Ue)|0,c=c+Math.imul(Re,Ke)|0,c=c+Math.imul(Be,Ue)|0,m=m+Math.imul(Be,Ke)|0,g=g+Math.imul(Ae,Fe)|0,c=c+Math.imul(Ae,We)|0,c=c+Math.imul(xe,Fe)|0,m=m+Math.imul(xe,We)|0,g=g+Math.imul(Ie,De)|0,c=c+Math.imul(Ie,qe)|0,c=c+Math.imul(Ee,De)|0,m=m+Math.imul(Ee,qe)|0,g=g+Math.imul(Se,Ve)|0,c=c+Math.imul(Se,$e)|0,c=c+Math.imul(_e,Ve)|0,m=m+Math.imul(_e,$e)|0,g=g+Math.imul(ge,He)|0,c=c+Math.imul(ge,je)|0,c=c+Math.imul(be,He)|0,m=m+Math.imul(be,je)|0,g=g+Math.imul(Y,Ge)|0,c=c+Math.imul(Y,Ye)|0,c=c+Math.imul(j,Ge)|0,m=m+Math.imul(j,Ye)|0,g=g+Math.imul(C,Ze)|0,c=c+Math.imul(C,Je)|0,c=c+Math.imul(K,Ze)|0,m=m+Math.imul(K,Je)|0;var _n=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(_n>>>26)|0,_n&=67108863,g=Math.imul(Te,Ne),c=Math.imul(Te,ze),c=c+Math.imul(Le,Ne)|0,m=Math.imul(Le,ze),g=g+Math.imul(Me,Ue)|0,c=c+Math.imul(Me,Ke)|0,c=c+Math.imul(Pe,Ue)|0,m=m+Math.imul(Pe,Ke)|0,g=g+Math.imul(Re,Fe)|0,c=c+Math.imul(Re,We)|0,c=c+Math.imul(Be,Fe)|0,m=m+Math.imul(Be,We)|0,g=g+Math.imul(Ae,De)|0,c=c+Math.imul(Ae,qe)|0,c=c+Math.imul(xe,De)|0,m=m+Math.imul(xe,qe)|0,g=g+Math.imul(Ie,Ve)|0,c=c+Math.imul(Ie,$e)|0,c=c+Math.imul(Ee,Ve)|0,m=m+Math.imul(Ee,$e)|0,g=g+Math.imul(Se,He)|0,c=c+Math.imul(Se,je)|0,c=c+Math.imul(_e,He)|0,m=m+Math.imul(_e,je)|0,g=g+Math.imul(ge,Ge)|0,c=c+Math.imul(ge,Ye)|0,c=c+Math.imul(be,Ge)|0,m=m+Math.imul(be,Ye)|0,g=g+Math.imul(Y,Ze)|0,c=c+Math.imul(Y,Je)|0,c=c+Math.imul(j,Ze)|0,m=m+Math.imul(j,Je)|0,g=g+Math.imul(C,Xe)|0,c=c+Math.imul(C,Qe)|0,c=c+Math.imul(K,Xe)|0,m=m+Math.imul(K,Qe)|0;var In=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(In>>>26)|0,In&=67108863,g=Math.imul(Ce,Ne),c=Math.imul(Ce,ze),c=c+Math.imul(Oe,Ne)|0,m=Math.imul(Oe,ze),g=g+Math.imul(Te,Ue)|0,c=c+Math.imul(Te,Ke)|0,c=c+Math.imul(Le,Ue)|0,m=m+Math.imul(Le,Ke)|0,g=g+Math.imul(Me,Fe)|0,c=c+Math.imul(Me,We)|0,c=c+Math.imul(Pe,Fe)|0,m=m+Math.imul(Pe,We)|0,g=g+Math.imul(Re,De)|0,c=c+Math.imul(Re,qe)|0,c=c+Math.imul(Be,De)|0,m=m+Math.imul(Be,qe)|0,g=g+Math.imul(Ae,Ve)|0,c=c+Math.imul(Ae,$e)|0,c=c+Math.imul(xe,Ve)|0,m=m+Math.imul(xe,$e)|0,g=g+Math.imul(Ie,He)|0,c=c+Math.imul(Ie,je)|0,c=c+Math.imul(Ee,He)|0,m=m+Math.imul(Ee,je)|0,g=g+Math.imul(Se,Ge)|0,c=c+Math.imul(Se,Ye)|0,c=c+Math.imul(_e,Ge)|0,m=m+Math.imul(_e,Ye)|0,g=g+Math.imul(ge,Ze)|0,c=c+Math.imul(ge,Je)|0,c=c+Math.imul(be,Ze)|0,m=m+Math.imul(be,Je)|0,g=g+Math.imul(Y,Xe)|0,c=c+Math.imul(Y,Qe)|0,c=c+Math.imul(j,Xe)|0,m=m+Math.imul(j,Qe)|0,g=g+Math.imul(C,et)|0,c=c+Math.imul(C,tt)|0,c=c+Math.imul(K,et)|0,m=m+Math.imul(K,tt)|0;var En=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(En>>>26)|0,En&=67108863,g=Math.imul(Ce,Ue),c=Math.imul(Ce,Ke),c=c+Math.imul(Oe,Ue)|0,m=Math.imul(Oe,Ke),g=g+Math.imul(Te,Fe)|0,c=c+Math.imul(Te,We)|0,c=c+Math.imul(Le,Fe)|0,m=m+Math.imul(Le,We)|0,g=g+Math.imul(Me,De)|0,c=c+Math.imul(Me,qe)|0,c=c+Math.imul(Pe,De)|0,m=m+Math.imul(Pe,qe)|0,g=g+Math.imul(Re,Ve)|0,c=c+Math.imul(Re,$e)|0,c=c+Math.imul(Be,Ve)|0,m=m+Math.imul(Be,$e)|0,g=g+Math.imul(Ae,He)|0,c=c+Math.imul(Ae,je)|0,c=c+Math.imul(xe,He)|0,m=m+Math.imul(xe,je)|0,g=g+Math.imul(Ie,Ge)|0,c=c+Math.imul(Ie,Ye)|0,c=c+Math.imul(Ee,Ge)|0,m=m+Math.imul(Ee,Ye)|0,g=g+Math.imul(Se,Ze)|0,c=c+Math.imul(Se,Je)|0,c=c+Math.imul(_e,Ze)|0,m=m+Math.imul(_e,Je)|0,g=g+Math.imul(ge,Xe)|0,c=c+Math.imul(ge,Qe)|0,c=c+Math.imul(be,Xe)|0,m=m+Math.imul(be,Qe)|0,g=g+Math.imul(Y,et)|0,c=c+Math.imul(Y,tt)|0,c=c+Math.imul(j,et)|0,m=m+Math.imul(j,tt)|0;var An=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(An>>>26)|0,An&=67108863,g=Math.imul(Ce,Fe),c=Math.imul(Ce,We),c=c+Math.imul(Oe,Fe)|0,m=Math.imul(Oe,We),g=g+Math.imul(Te,De)|0,c=c+Math.imul(Te,qe)|0,c=c+Math.imul(Le,De)|0,m=m+Math.imul(Le,qe)|0,g=g+Math.imul(Me,Ve)|0,c=c+Math.imul(Me,$e)|0,c=c+Math.imul(Pe,Ve)|0,m=m+Math.imul(Pe,$e)|0,g=g+Math.imul(Re,He)|0,c=c+Math.imul(Re,je)|0,c=c+Math.imul(Be,He)|0,m=m+Math.imul(Be,je)|0,g=g+Math.imul(Ae,Ge)|0,c=c+Math.imul(Ae,Ye)|0,c=c+Math.imul(xe,Ge)|0,m=m+Math.imul(xe,Ye)|0,g=g+Math.imul(Ie,Ze)|0,c=c+Math.imul(Ie,Je)|0,c=c+Math.imul(Ee,Ze)|0,m=m+Math.imul(Ee,Je)|0,g=g+Math.imul(Se,Xe)|0,c=c+Math.imul(Se,Qe)|0,c=c+Math.imul(_e,Xe)|0,m=m+Math.imul(_e,Qe)|0,g=g+Math.imul(ge,et)|0,c=c+Math.imul(ge,tt)|0,c=c+Math.imul(be,et)|0,m=m+Math.imul(be,tt)|0;var xn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(xn>>>26)|0,xn&=67108863,g=Math.imul(Ce,De),c=Math.imul(Ce,qe),c=c+Math.imul(Oe,De)|0,m=Math.imul(Oe,qe),g=g+Math.imul(Te,Ve)|0,c=c+Math.imul(Te,$e)|0,c=c+Math.imul(Le,Ve)|0,m=m+Math.imul(Le,$e)|0,g=g+Math.imul(Me,He)|0,c=c+Math.imul(Me,je)|0,c=c+Math.imul(Pe,He)|0,m=m+Math.imul(Pe,je)|0,g=g+Math.imul(Re,Ge)|0,c=c+Math.imul(Re,Ye)|0,c=c+Math.imul(Be,Ge)|0,m=m+Math.imul(Be,Ye)|0,g=g+Math.imul(Ae,Ze)|0,c=c+Math.imul(Ae,Je)|0,c=c+Math.imul(xe,Ze)|0,m=m+Math.imul(xe,Je)|0,g=g+Math.imul(Ie,Xe)|0,c=c+Math.imul(Ie,Qe)|0,c=c+Math.imul(Ee,Xe)|0,m=m+Math.imul(Ee,Qe)|0,g=g+Math.imul(Se,et)|0,c=c+Math.imul(Se,tt)|0,c=c+Math.imul(_e,et)|0,m=m+Math.imul(_e,tt)|0;var Rn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,g=Math.imul(Ce,Ve),c=Math.imul(Ce,$e),c=c+Math.imul(Oe,Ve)|0,m=Math.imul(Oe,$e),g=g+Math.imul(Te,He)|0,c=c+Math.imul(Te,je)|0,c=c+Math.imul(Le,He)|0,m=m+Math.imul(Le,je)|0,g=g+Math.imul(Me,Ge)|0,c=c+Math.imul(Me,Ye)|0,c=c+Math.imul(Pe,Ge)|0,m=m+Math.imul(Pe,Ye)|0,g=g+Math.imul(Re,Ze)|0,c=c+Math.imul(Re,Je)|0,c=c+Math.imul(Be,Ze)|0,m=m+Math.imul(Be,Je)|0,g=g+Math.imul(Ae,Xe)|0,c=c+Math.imul(Ae,Qe)|0,c=c+Math.imul(xe,Xe)|0,m=m+Math.imul(xe,Qe)|0,g=g+Math.imul(Ie,et)|0,c=c+Math.imul(Ie,tt)|0,c=c+Math.imul(Ee,et)|0,m=m+Math.imul(Ee,tt)|0;var Bn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,g=Math.imul(Ce,He),c=Math.imul(Ce,je),c=c+Math.imul(Oe,He)|0,m=Math.imul(Oe,je),g=g+Math.imul(Te,Ge)|0,c=c+Math.imul(Te,Ye)|0,c=c+Math.imul(Le,Ge)|0,m=m+Math.imul(Le,Ye)|0,g=g+Math.imul(Me,Ze)|0,c=c+Math.imul(Me,Je)|0,c=c+Math.imul(Pe,Ze)|0,m=m+Math.imul(Pe,Je)|0,g=g+Math.imul(Re,Xe)|0,c=c+Math.imul(Re,Qe)|0,c=c+Math.imul(Be,Xe)|0,m=m+Math.imul(Be,Qe)|0,g=g+Math.imul(Ae,et)|0,c=c+Math.imul(Ae,tt)|0,c=c+Math.imul(xe,et)|0,m=m+Math.imul(xe,tt)|0;var Mn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,g=Math.imul(Ce,Ge),c=Math.imul(Ce,Ye),c=c+Math.imul(Oe,Ge)|0,m=Math.imul(Oe,Ye),g=g+Math.imul(Te,Ze)|0,c=c+Math.imul(Te,Je)|0,c=c+Math.imul(Le,Ze)|0,m=m+Math.imul(Le,Je)|0,g=g+Math.imul(Me,Xe)|0,c=c+Math.imul(Me,Qe)|0,c=c+Math.imul(Pe,Xe)|0,m=m+Math.imul(Pe,Qe)|0,g=g+Math.imul(Re,et)|0,c=c+Math.imul(Re,tt)|0,c=c+Math.imul(Be,et)|0,m=m+Math.imul(Be,tt)|0;var Pn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,g=Math.imul(Ce,Ze),c=Math.imul(Ce,Je),c=c+Math.imul(Oe,Ze)|0,m=Math.imul(Oe,Je),g=g+Math.imul(Te,Xe)|0,c=c+Math.imul(Te,Qe)|0,c=c+Math.imul(Le,Xe)|0,m=m+Math.imul(Le,Qe)|0,g=g+Math.imul(Me,et)|0,c=c+Math.imul(Me,tt)|0,c=c+Math.imul(Pe,et)|0,m=m+Math.imul(Pe,tt)|0;var Tn=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,g=Math.imul(Ce,Xe),c=Math.imul(Ce,Qe),c=c+Math.imul(Oe,Xe)|0,m=Math.imul(Oe,Qe),g=g+Math.imul(Te,et)|0,c=c+Math.imul(Te,tt)|0,c=c+Math.imul(Le,et)|0,m=m+Math.imul(Le,tt)|0;var Ln=(k+g|0)+((c&8191)<<13)|0;k=(m+(c>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,g=Math.imul(Ce,et),c=Math.imul(Ce,tt),c=c+Math.imul(Oe,et)|0,m=Math.imul(Oe,tt);var Cn=(k+g|0)+((c&8191)<<13)|0;return k=(m+(c>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,b[0]=yn,b[1]=mn,b[2]=bn,b[3]=wn,b[4]=kn,b[5]=vn,b[6]=Sn,b[7]=_n,b[8]=In,b[9]=En,b[10]=An,b[11]=xn,b[12]=Rn,b[13]=Bn,b[14]=Mn,b[15]=Pn,b[16]=Tn,b[17]=Ln,b[18]=Cn,k!==0&&(b[19]=k,h.length++),h};Math.imul||(V=P);function F(d,o,u){u.negative=o.negative^d.negative,u.length=d.length+o.length;for(var h=0,p=0,y=0;y<u.length-1;y++){var b=p;p=0;for(var k=h&67108863,g=Math.min(y,o.length-1),c=Math.max(0,y-d.length+1);c<=g;c++){var m=y-c,U=d.words[m]|0,C=o.words[c]|0,K=U*C,te=K&67108863;b=b+(K/67108864|0)|0,te=te+k|0,k=te&67108863,b=b+(te>>>26)|0,p+=b>>>26,b&=67108863}u.words[y]=k,h=b,b=p}return h!==0?u.words[y]=h:u.length--,u._strip()}function G(d,o,u){return F(d,o,u)}n.prototype.mulTo=function(o,u){var h,p=this.length+o.length;return this.length===10&&o.length===10?h=V(this,o,u):p<63?h=P(this,o,u):p<1024?h=F(this,o,u):h=G(this,o,u),h},n.prototype.mul=function(o){var u=new n(null);return u.words=new Array(this.length+o.length),this.mulTo(o,u)},n.prototype.mulf=function(o){var u=new n(null);return u.words=new Array(this.length+o.length),G(this,o,u)},n.prototype.imul=function(o){return this.clone().mulTo(o,this)},n.prototype.imuln=function(o){var u=o<0;u&&(o=-o),r(typeof o=="number"),r(o<67108864);for(var h=0,p=0;p<this.length;p++){var y=(this.words[p]|0)*o,b=(y&67108863)+(h&67108863);h>>=26,h+=y/67108864|0,h+=b>>>26,this.words[p]=b&67108863}return h!==0&&(this.words[p]=h,this.length++),this.length=o===0?1:this.length,u?this.ineg():this},n.prototype.muln=function(o){return this.clone().imuln(o)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(o){var u=x(o);if(u.length===0)return new n(1);for(var h=this,p=0;p<u.length&&u[p]===0;p++,h=h.sqr());if(++p<u.length)for(var y=h.sqr();p<u.length;p++,y=y.sqr())u[p]!==0&&(h=h.mul(y));return h},n.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var u=o%26,h=(o-u)/26,p=67108863>>>26-u<<26-u,y;if(u!==0){var b=0;for(y=0;y<this.length;y++){var k=this.words[y]&p,g=(this.words[y]|0)-k<<u;this.words[y]=g|b,b=k>>>26-u}b&&(this.words[y]=b,this.length++)}if(h!==0){for(y=this.length-1;y>=0;y--)this.words[y+h]=this.words[y];for(y=0;y<h;y++)this.words[y]=0;this.length+=h}return this._strip()},n.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},n.prototype.iushrn=function(o,u,h){r(typeof o=="number"&&o>=0);var p;u?p=(u-u%26)/26:p=0;var y=o%26,b=Math.min((o-y)/26,this.length),k=67108863^67108863>>>y<<y,g=h;if(p-=b,p=Math.max(0,p),g){for(var c=0;c<b;c++)g.words[c]=this.words[c];g.length=b}if(b!==0)if(this.length>b)for(this.length-=b,c=0;c<this.length;c++)this.words[c]=this.words[c+b];else this.words[0]=0,this.length=1;var m=0;for(c=this.length-1;c>=0&&(m!==0||c>=p);c--){var U=this.words[c]|0;this.words[c]=m<<26-y|U>>>y,m=U&k}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(o,u,h){return r(this.negative===0),this.iushrn(o,u,h)},n.prototype.shln=function(o){return this.clone().ishln(o)},n.prototype.ushln=function(o){return this.clone().iushln(o)},n.prototype.shrn=function(o){return this.clone().ishrn(o)},n.prototype.ushrn=function(o){return this.clone().iushrn(o)},n.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var u=o%26,h=(o-u)/26,p=1<<u;if(this.length<=h)return!1;var y=this.words[h];return!!(y&p)},n.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var u=o%26,h=(o-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(u!==0&&h++,this.length=Math.min(h,this.length),u!==0){var p=67108863^67108863>>>u<<u;this.words[this.length-1]&=p}return this._strip()},n.prototype.maskn=function(o){return this.clone().imaskn(o)},n.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},n.prototype._iaddn=function(o){this.words[0]+=o;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},n.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},n.prototype.addn=function(o){return this.clone().iaddn(o)},n.prototype.subn=function(o){return this.clone().isubn(o)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(o,u,h){var p=o.length+h,y;this._expand(p);var b,k=0;for(y=0;y<o.length;y++){b=(this.words[y+h]|0)+k;var g=(o.words[y]|0)*u;b-=g&67108863,k=(b>>26)-(g/67108864|0),this.words[y+h]=b&67108863}for(;y<this.length-h;y++)b=(this.words[y+h]|0)+k,k=b>>26,this.words[y+h]=b&67108863;if(k===0)return this._strip();for(r(k===-1),k=0,y=0;y<this.length;y++)b=-(this.words[y]|0)+k,k=b>>26,this.words[y]=b&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(o,u){var h=this.length-o.length,p=this.clone(),y=o,b=y.words[y.length-1]|0,k=this._countBits(b);h=26-k,h!==0&&(y=y.ushln(h),p.iushln(h),b=y.words[y.length-1]|0);var g=p.length-y.length,c;if(u!=="mod"){c=new n(null),c.length=g+1,c.words=new Array(c.length);for(var m=0;m<c.length;m++)c.words[m]=0}var U=p.clone()._ishlnsubmul(y,1,g);U.negative===0&&(p=U,c&&(c.words[g]=1));for(var C=g-1;C>=0;C--){var K=(p.words[y.length+C]|0)*67108864+(p.words[y.length+C-1]|0);for(K=Math.min(K/b|0,67108863),p._ishlnsubmul(y,K,C);p.negative!==0;)K--,p.negative=0,p._ishlnsubmul(y,1,C),p.isZero()||(p.negative^=1);c&&(c.words[C]=K)}return c&&c._strip(),p._strip(),u!=="div"&&h!==0&&p.iushrn(h),{div:c||null,mod:p}},n.prototype.divmod=function(o,u,h){if(r(!o.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var p,y,b;return this.negative!==0&&o.negative===0?(b=this.neg().divmod(o,u),u!=="mod"&&(p=b.div.neg()),u!=="div"&&(y=b.mod.neg(),h&&y.negative!==0&&y.iadd(o)),{div:p,mod:y}):this.negative===0&&o.negative!==0?(b=this.divmod(o.neg(),u),u!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):this.negative&o.negative?(b=this.neg().divmod(o.neg(),u),u!=="div"&&(y=b.mod.neg(),h&&y.negative!==0&&y.isub(o)),{div:b.div,mod:y}):o.length>this.length||this.cmp(o)<0?{div:new n(0),mod:this}:o.length===1?u==="div"?{div:this.divn(o.words[0]),mod:null}:u==="mod"?{div:null,mod:new n(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new n(this.modrn(o.words[0]))}:this._wordDiv(o,u)},n.prototype.div=function(o){return this.divmod(o,"div",!1).div},n.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},n.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},n.prototype.divRound=function(o){var u=this.divmod(o);if(u.mod.isZero())return u.div;var h=u.div.negative!==0?u.mod.isub(o):u.mod,p=o.ushrn(1),y=o.andln(1),b=h.cmp(p);return b<0||y===1&&b===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},n.prototype.modrn=function(o){var u=o<0;u&&(o=-o),r(o<=67108863);for(var h=(1<<26)%o,p=0,y=this.length-1;y>=0;y--)p=(h*p+(this.words[y]|0))%o;return u?-p:p},n.prototype.modn=function(o){return this.modrn(o)},n.prototype.idivn=function(o){var u=o<0;u&&(o=-o),r(o<=67108863);for(var h=0,p=this.length-1;p>=0;p--){var y=(this.words[p]|0)+h*67108864;this.words[p]=y/o|0,h=y%o}return this._strip(),u?this.ineg():this},n.prototype.divn=function(o){return this.clone().idivn(o)},n.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var u=this,h=o.clone();u.negative!==0?u=u.umod(o):u=u.clone();for(var p=new n(1),y=new n(0),b=new n(0),k=new n(1),g=0;u.isEven()&&h.isEven();)u.iushrn(1),h.iushrn(1),++g;for(var c=h.clone(),m=u.clone();!u.isZero();){for(var U=0,C=1;!(u.words[0]&C)&&U<26;++U,C<<=1);if(U>0)for(u.iushrn(U);U-- >0;)(p.isOdd()||y.isOdd())&&(p.iadd(c),y.isub(m)),p.iushrn(1),y.iushrn(1);for(var K=0,te=1;!(h.words[0]&te)&&K<26;++K,te<<=1);if(K>0)for(h.iushrn(K);K-- >0;)(b.isOdd()||k.isOdd())&&(b.iadd(c),k.isub(m)),b.iushrn(1),k.iushrn(1);u.cmp(h)>=0?(u.isub(h),p.isub(b),y.isub(k)):(h.isub(u),b.isub(p),k.isub(y))}return{a:b,b:k,gcd:h.iushln(g)}},n.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var u=this,h=o.clone();u.negative!==0?u=u.umod(o):u=u.clone();for(var p=new n(1),y=new n(0),b=h.clone();u.cmpn(1)>0&&h.cmpn(1)>0;){for(var k=0,g=1;!(u.words[0]&g)&&k<26;++k,g<<=1);if(k>0)for(u.iushrn(k);k-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var c=0,m=1;!(h.words[0]&m)&&c<26;++c,m<<=1);if(c>0)for(h.iushrn(c);c-- >0;)y.isOdd()&&y.iadd(b),y.iushrn(1);u.cmp(h)>=0?(u.isub(h),p.isub(y)):(h.isub(u),y.isub(p))}var U;return u.cmpn(1)===0?U=p:U=y,U.cmpn(0)<0&&U.iadd(o),U},n.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var u=this.clone(),h=o.clone();u.negative=0,h.negative=0;for(var p=0;u.isEven()&&h.isEven();p++)u.iushrn(1),h.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;h.isEven();)h.iushrn(1);var y=u.cmp(h);if(y<0){var b=u;u=h,h=b}else if(y===0||h.cmpn(1)===0)break;u.isub(h)}while(!0);return h.iushln(p)},n.prototype.invm=function(o){return this.egcd(o).a.umod(o)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(o){return this.words[0]&o},n.prototype.bincn=function(o){r(typeof o=="number");var u=o%26,h=(o-u)/26,p=1<<u;if(this.length<=h)return this._expand(h+1),this.words[h]|=p,this;for(var y=p,b=h;y!==0&&b<this.length;b++){var k=this.words[b]|0;k+=y,y=k>>>26,k&=67108863,this.words[b]=k}return y!==0&&(this.words[b]=y,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(o){var u=o<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var h;if(this.length>1)h=1;else{u&&(o=-o),r(o<=67108863,"Number is too big");var p=this.words[0]|0;h=p===o?0:p<o?-1:1}return this.negative!==0?-h|0:h},n.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var u=this.ucmp(o);return this.negative!==0?-u|0:u},n.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var u=0,h=this.length-1;h>=0;h--){var p=this.words[h]|0,y=o.words[h]|0;if(p!==y){p<y?u=-1:p>y&&(u=1);break}}return u},n.prototype.gtn=function(o){return this.cmpn(o)===1},n.prototype.gt=function(o){return this.cmp(o)===1},n.prototype.gten=function(o){return this.cmpn(o)>=0},n.prototype.gte=function(o){return this.cmp(o)>=0},n.prototype.ltn=function(o){return this.cmpn(o)===-1},n.prototype.lt=function(o){return this.cmp(o)===-1},n.prototype.lten=function(o){return this.cmpn(o)<=0},n.prototype.lte=function(o){return this.cmp(o)<=0},n.prototype.eqn=function(o){return this.cmpn(o)===0},n.prototype.eq=function(o){return this.cmp(o)===0},n.red=function(o){return new le(o)},n.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(o){return this.red=o,this},n.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},n.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},n.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},n.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},n.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},n.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},n.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},n.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var ue={k256:null,p224:null,p192:null,p25519:null};function oe(d,o){this.name=d,this.p=new n(o,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}oe.prototype._tmp=function(){var o=new n(null);return o.words=new Array(Math.ceil(this.n/13)),o},oe.prototype.ireduce=function(o){var u=o,h;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),h=u.bitLength();while(h>this.n);var p=h<this.n?-1:u.ucmp(this.p);return p===0?(u.words[0]=0,u.length=1):p>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},oe.prototype.split=function(o,u){o.iushrn(this.n,0,u)},oe.prototype.imulK=function(o){return o.imul(this.k)};function me(){oe.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(me,oe),me.prototype.split=function(o,u){for(var h=4194303,p=Math.min(o.length,9),y=0;y<p;y++)u.words[y]=o.words[y];if(u.length=p,o.length<=9){o.words[0]=0,o.length=1;return}var b=o.words[9];for(u.words[u.length++]=b&h,y=10;y<o.length;y++){var k=o.words[y]|0;o.words[y-10]=(k&h)<<4|b>>>22,b=k}b>>>=22,o.words[y-10]=b,b===0&&o.length>10?o.length-=10:o.length-=9},me.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var u=0,h=0;h<o.length;h++){var p=o.words[h]|0;u+=p*977,o.words[h]=u&67108863,u=p*64+(u/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function ht(){oe.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ht,oe);function X(){oe.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(X,oe);function Ht(){oe.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Ht,oe),Ht.prototype.imulK=function(o){for(var u=0,h=0;h<o.length;h++){var p=(o.words[h]|0)*19+u,y=p&67108863;p>>>=26,o.words[h]=y,u=p}return u!==0&&(o.words[o.length++]=u),o},n._prime=function(o){if(ue[o])return ue[o];var u;if(o==="k256")u=new me;else if(o==="p224")u=new ht;else if(o==="p192")u=new X;else if(o==="p25519")u=new Ht;else throw new Error("Unknown prime "+o);return ue[o]=u,u};function le(d){if(typeof d=="string"){var o=n._prime(d);this.m=o.p,this.prime=o}else r(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}le.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},le.prototype._verify2=function(o,u){r((o.negative|u.negative)===0,"red works only with positives"),r(o.red&&o.red===u.red,"red works only with red numbers")},le.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(v(o,o.umod(this.m)._forceRed(this)),o)},le.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},le.prototype.add=function(o,u){this._verify2(o,u);var h=o.add(u);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},le.prototype.iadd=function(o,u){this._verify2(o,u);var h=o.iadd(u);return h.cmp(this.m)>=0&&h.isub(this.m),h},le.prototype.sub=function(o,u){this._verify2(o,u);var h=o.sub(u);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},le.prototype.isub=function(o,u){this._verify2(o,u);var h=o.isub(u);return h.cmpn(0)<0&&h.iadd(this.m),h},le.prototype.shl=function(o,u){return this._verify1(o),this.imod(o.ushln(u))},le.prototype.imul=function(o,u){return this._verify2(o,u),this.imod(o.imul(u))},le.prototype.mul=function(o,u){return this._verify2(o,u),this.imod(o.mul(u))},le.prototype.isqr=function(o){return this.imul(o,o.clone())},le.prototype.sqr=function(o){return this.mul(o,o)},le.prototype.sqrt=function(o){if(o.isZero())return o.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var h=this.m.add(new n(1)).iushrn(2);return this.pow(o,h)}for(var p=this.m.subn(1),y=0;!p.isZero()&&p.andln(1)===0;)y++,p.iushrn(1);r(!p.isZero());var b=new n(1).toRed(this),k=b.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);this.pow(c,g).cmp(k)!==0;)c.redIAdd(k);for(var m=this.pow(c,p),U=this.pow(o,p.addn(1).iushrn(1)),C=this.pow(o,p),K=y;C.cmp(b)!==0;){for(var te=C,Y=0;te.cmp(b)!==0;Y++)te=te.redSqr();r(Y<K);var j=this.pow(m,new n(1).iushln(K-Y-1));U=U.redMul(j),m=j.redSqr(),C=C.redMul(m),K=Y}return U},le.prototype.invm=function(o){var u=o._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},le.prototype.pow=function(o,u){if(u.isZero())return new n(1).toRed(this);if(u.cmpn(1)===0)return o.clone();var h=4,p=new Array(1<<h);p[0]=new n(1).toRed(this),p[1]=o;for(var y=2;y<p.length;y++)p[y]=this.mul(p[y-1],o);var b=p[0],k=0,g=0,c=u.bitLength()%26;for(c===0&&(c=26),y=u.length-1;y>=0;y--){for(var m=u.words[y],U=c-1;U>=0;U--){var C=m>>U&1;if(b!==p[0]&&(b=this.sqr(b)),C===0&&k===0){g=0;continue}k<<=1,k|=C,g++,!(g!==h&&(y!==0||U!==0))&&(b=this.mul(b,p[k]),g=0,k=0)}c=26}return b},le.prototype.convertTo=function(o){var u=o.umod(this.m);return u===o?u.clone():u},le.prototype.convertFrom=function(o){var u=o.clone();return u.red=null,u},n.mont=function(o){return new Q(o)};function Q(d){le.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Q,le),Q.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Q.prototype.convertFrom=function(o){var u=this.imod(o.mul(this.rinv));return u.red=null,u},Q.prototype.imul=function(o,u){if(o.isZero()||u.isZero())return o.words[0]=0,o.length=1,o;var h=o.imul(u),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=h.isub(p).iushrn(this.shift),b=y;return y.cmp(this.m)>=0?b=y.isub(this.m):y.cmpn(0)<0&&(b=y.iadd(this.m)),b._forceRed(this)},Q.prototype.mul=function(o,u){if(o.isZero()||u.isZero())return new n(0)._forceRed(this);var h=o.mul(u),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=h.isub(p).iushrn(this.shift),b=y;return y.cmp(this.m)>=0?b=y.isub(this.m):y.cmpn(0)<0&&(b=y.iadd(this.m)),b._forceRed(this)},Q.prototype.invm=function(o){var u=this.imod(o._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(i,Bt)})(os);var Pi=os.exports;const ri=tn(Pi);var Zn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(i,e){var t=H,r=t.Buffer;function s(a,l){for(var f in a)l[f]=a[f]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?i.exports=t:(s(t,e),e.Buffer=n);function n(a,l,f){return r(a,l,f)}n.prototype=Object.create(r.prototype),s(r,n),n.from=function(a,l,f){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,l,f)},n.alloc=function(a,l,f){if(typeof a!="number")throw new TypeError("Argument must be a number");var w=r(a);return l!==void 0?typeof f=="string"?w.fill(l,f):w.fill(l):w.fill(0),w},n.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},n.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(Zn,Zn.exports);var ca=Zn.exports,Kr=ca.Buffer;function ua(i){if(i.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<i.length;r++){var s=i.charAt(r),n=s.charCodeAt(0);if(e[n]!==255)throw new TypeError(s+" is ambiguous");e[n]=r}var a=i.length,l=i.charAt(0),f=Math.log(a)/Math.log(256),w=Math.log(256)/Math.log(a);function v(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Kr.from(S)),!Kr.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var E=0,R=0,x=0,P=S.length;x!==P&&S[x]===0;)x++,E++;for(var V=(P-x)*w+1>>>0,F=new Uint8Array(V);x!==P;){for(var G=S[x],ue=0,oe=V-1;(G!==0||ue<R)&&oe!==-1;oe--,ue++)G+=256*F[oe]>>>0,F[oe]=G%a>>>0,G=G/a>>>0;if(G!==0)throw new Error("Non-zero carry");R=ue,x++}for(var me=V-R;me!==V&&F[me]===0;)me++;for(var ht=l.repeat(E);me<V;++me)ht+=i.charAt(F[me]);return ht}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Kr.alloc(0);for(var E=0,R=0,x=0;S[E]===l;)R++,E++;for(var P=(S.length-E)*f+1>>>0,V=new Uint8Array(P);E<S.length;){var F=S.charCodeAt(E);if(F>255)return;var G=e[F];if(G===255)return;for(var ue=0,oe=P-1;(G!==0||ue<x)&&oe!==-1;oe--,ue++)G+=a*V[oe]>>>0,V[oe]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");x=ue,E++}for(var me=P-x;me!==P&&V[me]===0;)me++;var ht=Kr.allocUnsafe(R+(P-me));ht.fill(0,0,R);for(var X=R;me!==P;)ht[X++]=V[me++];return ht}function B(S){var E=A(S);if(E)return E;throw new Error("Non-base"+a+" character")}return{encode:v,decodeUnsafe:A,decode:B}}var la=ua,ha=la,fa="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ti=ha(fa);const ut=tn(Ti);var ct={};function qt(i,e,t){return e<=i&&i<=t}function rn(i){if(i===void 0)return{};if(i===Object(i))return i;throw TypeError("Could not convert argument to dictionary")}function da(i){for(var e=String(i),t=e.length,r=0,s=[];r<t;){var n=e.charCodeAt(r);if(n<55296||n>57343)s.push(n);else if(56320<=n&&n<=57343)s.push(65533);else if(55296<=n&&n<=56319)if(r===t-1)s.push(65533);else{var a=i.charCodeAt(r+1);if(56320<=a&&a<=57343){var l=n&1023,f=a&1023;s.push(65536+(l<<10)+f),r+=1}else s.push(65533)}r+=1}return s}function pa(i){for(var e="",t=0;t<i.length;++t){var r=i[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var jr=-1;function as(i){this.tokens=[].slice.call(i)}as.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():jr},prepend:function(i){if(Array.isArray(i))for(var e=i;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(i)},push:function(i){if(Array.isArray(i))for(var e=i;e.length;)this.tokens.push(e.shift());else this.tokens.push(i)}};var mr=-1;function Nn(i,e){if(i)throw TypeError("Decoder error");return e||65533}var Gr="utf-8";function Yr(i,e){if(!(this instanceof Yr))return new Yr(i,e);if(i=i!==void 0?String(i).toLowerCase():Gr,i!==Gr)throw new Error("Encoding not supported. Only utf-8 is supported");e=rn(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Yr.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=rn(t),this._streaming||(this._decoder=new ga({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new as(r),n=[],a;!s.endOfStream()&&(a=this._decoder.handler(s,s.read()),a!==mr);)a!==null&&(Array.isArray(a)?n.push.apply(n,a):n.push(a));if(!this._streaming){do{if(a=this._decoder.handler(s,s.read()),a===mr)break;a!==null&&(Array.isArray(a)?n.push.apply(n,a):n.push(a))}while(!s.endOfStream());this._decoder=null}return n.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(n[0]===65279?(this._BOMseen=!0,n.shift()):this._BOMseen=!0),pa(n)}};function Zr(i,e){if(!(this instanceof Zr))return new Zr(i,e);if(i=i!==void 0?String(i).toLowerCase():Gr,i!==Gr)throw new Error("Encoding not supported. Only utf-8 is supported");e=rn(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Zr.prototype={encode:function(e,t){e=e?String(e):"",t=rn(t),this._streaming||(this._encoder=new ya(this._options)),this._streaming=!!t.stream;for(var r=[],s=new as(da(e)),n;!s.endOfStream()&&(n=this._encoder.handler(s,s.read()),n!==mr);)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;n=this._encoder.handler(s,s.read()),n!==mr;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}};function ga(i){var e=i.fatal,t=0,r=0,s=0,n=128,a=191;this.handler=function(l,f){if(f===jr&&s!==0)return s=0,Nn(e);if(f===jr)return mr;if(s===0){if(qt(f,0,127))return f;if(qt(f,194,223))s=1,t=f-192;else if(qt(f,224,239))f===224&&(n=160),f===237&&(a=159),s=2,t=f-224;else if(qt(f,240,244))f===240&&(n=144),f===244&&(a=143),s=3,t=f-240;else return Nn(e);return t=t<<6*s,null}if(!qt(f,n,a))return t=s=r=0,n=128,a=191,l.prepend(f),Nn(e);if(n=128,a=191,r+=1,t+=f-128<<6*(s-r),r!==s)return null;var w=t;return t=s=r=0,w}}function ya(i){i.fatal,this.handler=function(e,t){if(t===jr)return mr;if(qt(t,0,127))return t;var r,s;qt(t,128,2047)?(r=1,s=192):qt(t,2048,65535)?(r=2,s=224):qt(t,65536,1114111)&&(r=3,s=240);for(var n=[(t>>6*r)+s];r>0;){var a=t>>6*(r-1);n.push(128|a&63),r-=1}return n}}const ma=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Yr,TextEncoder:Zr},Symbol.toStringTag,{value:"Module"})),ba=Ei(ma);var wa=Bt&&Bt.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t),Object.defineProperty(i,r,{enumerable:!0,get:function(){return e[t]}})}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),ka=Bt&&Bt.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Ut=Bt&&Bt.__decorate||function(i,e,t,r){var s=arguments.length,n=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,r);else for(var l=i.length-1;l>=0;l--)(a=i[l])&&(n=(s<3?a(n):s>3?a(e,t,n):a(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n},va=Bt&&Bt.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.hasOwnProperty.call(i,t)&&wa(e,i,t);return ka(e,i),e},Li=Bt&&Bt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ct,"__esModule",{value:!0});var Ci=ct.deserializeUnchecked=Fi=ct.deserialize=Ki=ct.serialize=ct.BinaryReader=ct.BinaryWriter=ct.BorshError=ct.baseDecode=ct.baseEncode=void 0;const jt=Li(Pi),Oi=Li(Ti),Sa=va(ba),_a=typeof TextDecoder!="function"?Sa.TextDecoder:TextDecoder,Ia=new _a("utf-8",{fatal:!0});function Ea(i){return typeof i=="string"&&(i=Buffer.from(i,"utf8")),Oi.default.encode(Buffer.from(i))}ct.baseEncode=Ea;function Aa(i){return Buffer.from(Oi.default.decode(i))}ct.baseDecode=Aa;const zn=1024;class yt extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ct.BorshError=yt;class Ni{constructor(){this.buf=Buffer.alloc(zn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(zn)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new jt.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new jt.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new jt.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new jt.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(zn)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}ct.BinaryWriter=Ni;function Kt(i,e,t){const r=t.value;t.value=function(...s){try{return r.apply(this,s)}catch(n){if(n instanceof RangeError){const a=n.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new yt("Reached the end of buffer when deserializing")}throw n}}}class It{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new jt.default(e,"le")}readU128(){const e=this.readBuffer(16);return new jt.default(e,"le")}readU256(){const e=this.readBuffer(32);return new jt.default(e,"le")}readU512(){const e=this.readBuffer(64);return new jt.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new yt(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return Ia.decode(t)}catch(r){throw new yt(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let s=0;s<t;++s)r.push(e());return r}}Ut([Kt],It.prototype,"readU8",null);Ut([Kt],It.prototype,"readU16",null);Ut([Kt],It.prototype,"readU32",null);Ut([Kt],It.prototype,"readU64",null);Ut([Kt],It.prototype,"readU128",null);Ut([Kt],It.prototype,"readU256",null);Ut([Kt],It.prototype,"readU512",null);Ut([Kt],It.prototype,"readString",null);Ut([Kt],It.prototype,"readFixedArray",null);Ut([Kt],It.prototype,"readArray",null);ct.BinaryReader=It;function zi(i){return i.charAt(0).toUpperCase()+i.slice(1)}function Xt(i,e,t,r,s){try{if(typeof r=="string")s[`write${zi(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new yt(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);s.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new yt(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let n=0;n<r[1];n++)Xt(i,null,t[n],r[0],s)}else s.writeArray(t,n=>{Xt(i,e,n,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?s.writeU8(0):(s.writeU8(1),Xt(i,e,t,r.type,s));break}case"map":{s.writeU32(t.size),t.forEach((n,a)=>{Xt(i,e,a,r.key,s),Xt(i,e,n,r.value,s)});break}default:throw new yt(`FieldType ${r} unrecognized`)}else Ui(i,t,s)}catch(n){throw n instanceof yt&&n.addToFieldPath(e),n}}function Ui(i,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const r=i.get(e.constructor);if(!r)throw new yt(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,n])=>{Xt(i,s,e[s],n,t)});else if(r.kind==="enum"){const s=e[r.field];for(let n=0;n<r.values.length;++n){const[a,l]=r.values[n];if(a===s){t.writeU8(n),Xt(i,a,e[a],l,t);break}}}else throw new yt(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function xa(i,e,t=Ni){const r=new t;return Ui(i,e,r),r.toArray()}var Ki=ct.serialize=xa;function Qt(i,e,t,r){try{if(typeof t=="string")return r[`read${zi(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){const s=[];for(let n=0;n<t[1];n++)s.push(Qt(i,null,t[0],r));return s}else return r.readArray(()=>Qt(i,e,t[0],r))}if(t.kind==="option")return r.readU8()?Qt(i,e,t.type,r):void 0;if(t.kind==="map"){let s=new Map;const n=r.readU32();for(let a=0;a<n;a++){const l=Qt(i,e,t.key,r),f=Qt(i,e,t.value,r);s.set(l,f)}return s}return cs(i,t,r)}catch(s){throw s instanceof yt&&s.addToFieldPath(e),s}}function cs(i,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const r=i.get(e);if(!r)throw new yt(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[n,a]of i.get(e).fields)s[n]=Qt(i,n,a,t);return new e(s)}if(r.kind==="enum"){const s=t.readU8();if(s>=r.values.length)throw new yt(`Enum index: ${s} is out of range`);const[n,a]=r.values[s],l=Qt(i,n,a,t);return new e({[n]:l})}throw new yt(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function Ra(i,e,t,r=It){const s=new r(t),n=cs(i,e,s);if(s.offset<t.length)throw new yt(`Unexpected ${t.length-s.offset} bytes after deserialized data`);return n}var Fi=ct.deserialize=Ra;function Ba(i,e,t,r=It){const s=new r(t);return cs(i,e,s)}Ci=ct.deserializeUnchecked=Ba;var I={};Object.defineProperty(I,"__esModule",{value:!0});I.s16=I.s8=I.nu64be=I.u48be=I.u40be=I.u32be=I.u24be=I.u16be=at=I.nu64=I.u48=I.u40=W=I.u32=I.u24=At=I.u16=ne=I.u8=Yt=I.offset=I.greedy=I.Constant=I.UTF8=I.CString=I.Blob=I.Boolean=I.BitField=I.BitStructure=I.VariantLayout=I.Union=I.UnionLayoutDiscriminator=I.UnionDiscriminator=I.Structure=I.Sequence=I.DoubleBE=I.Double=I.FloatBE=I.Float=I.NearInt64BE=I.NearInt64=I.NearUInt64BE=I.NearUInt64=I.IntBE=I.Int=I.UIntBE=I.UInt=I.OffsetLayout=I.GreedyCount=I.ExternalLayout=I.bindConstructorLayout=I.nameWithProperty=I.Layout=I.uint8ArrayToBuffer=I.checkUint8Array=void 0;I.constant=I.utf8=I.cstr=ye=I.blob=I.unionLayoutDiscriminator=I.union=lt=I.seq=I.bits=D=I.struct=I.f64be=I.f64=I.f32be=I.f32=I.ns64be=I.s48be=I.s40be=I.s32be=I.s24be=I.s16be=St=I.ns64=I.s48=I.s40=I.s32=I.s24=void 0;const us=H;function vr(i){if(!(i instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}I.checkUint8Array=vr;function ie(i){return vr(i),us.Buffer.from(i.buffer,i.byteOffset,i.length)}I.uint8ArrayToBuffer=ie;class he{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}I.Layout=he;function ls(i,e){return e.property?i+"["+e.property+"]":i}I.nameWithProperty=ls;function Ma(i,e){if(typeof i!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(i,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof he))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");i.layout_=e,e.boundConstructor_=i,e.makeDestinationObject=()=>new i,Object.defineProperty(i.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(i,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}I.bindConstructorLayout=Ma;class vt extends he{isCount(){throw new Error("ExternalLayout is abstract")}}I.ExternalLayout=vt;class Wi extends vt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){vr(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}I.GreedyCount=Wi;class hs extends vt{constructor(e,t=0,r){if(!(e instanceof he))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof xt||this.layout instanceof Rt}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}I.OffsetLayout=hs;class xt extends he{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return ie(e).readUIntLE(t,this.span)}encode(e,t,r=0){return ie(t).writeUIntLE(e,r,this.span),this.span}}I.UInt=xt;class Rt extends he{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return ie(e).readUIntBE(t,this.span)}encode(e,t,r=0){return ie(t).writeUIntBE(e,r,this.span),this.span}}I.UIntBE=Rt;class ir extends he{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return ie(e).readIntLE(t,this.span)}encode(e,t,r=0){return ie(t).writeIntLE(e,r,this.span),this.span}}I.Int=ir;class Sr extends he{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return ie(e).readIntBE(t,this.span)}encode(e,t,r=0){return ie(t).writeIntBE(e,r,this.span),this.span}}I.IntBE=Sr;const Jn=Math.pow(2,32);function nn(i){const e=Math.floor(i/Jn),t=i-e*Jn;return{hi32:e,lo32:t}}function sn(i,e){return i*Jn+e}class Di extends he{constructor(e){super(8,e)}decode(e,t=0){const r=ie(e),s=r.readUInt32LE(t),n=r.readUInt32LE(t+4);return sn(n,s)}encode(e,t,r=0){const s=nn(e),n=ie(t);return n.writeUInt32LE(s.lo32,r),n.writeUInt32LE(s.hi32,r+4),8}}I.NearUInt64=Di;class qi extends he{constructor(e){super(8,e)}decode(e,t=0){const r=ie(e),s=r.readUInt32BE(t),n=r.readUInt32BE(t+4);return sn(s,n)}encode(e,t,r=0){const s=nn(e),n=ie(t);return n.writeUInt32BE(s.hi32,r),n.writeUInt32BE(s.lo32,r+4),8}}I.NearUInt64BE=qi;class Vi extends he{constructor(e){super(8,e)}decode(e,t=0){const r=ie(e),s=r.readUInt32LE(t),n=r.readInt32LE(t+4);return sn(n,s)}encode(e,t,r=0){const s=nn(e),n=ie(t);return n.writeUInt32LE(s.lo32,r),n.writeInt32LE(s.hi32,r+4),8}}I.NearInt64=Vi;class $i extends he{constructor(e){super(8,e)}decode(e,t=0){const r=ie(e),s=r.readInt32BE(t),n=r.readUInt32BE(t+4);return sn(s,n)}encode(e,t,r=0){const s=nn(e),n=ie(t);return n.writeInt32BE(s.hi32,r),n.writeUInt32BE(s.lo32,r+4),8}}I.NearInt64BE=$i;class Hi extends he{constructor(e){super(4,e)}decode(e,t=0){return ie(e).readFloatLE(t)}encode(e,t,r=0){return ie(t).writeFloatLE(e,r),4}}I.Float=Hi;class ji extends he{constructor(e){super(4,e)}decode(e,t=0){return ie(e).readFloatBE(t)}encode(e,t,r=0){return ie(t).writeFloatBE(e,r),4}}I.FloatBE=ji;class Gi extends he{constructor(e){super(8,e)}decode(e,t=0){return ie(e).readDoubleLE(t)}encode(e,t,r=0){return ie(t).writeDoubleLE(e,r),8}}I.Double=Gi;class Yi extends he{constructor(e){super(8,e)}decode(e,t=0){return ie(e).readDoubleBE(t)}encode(e,t,r=0){return ie(t).writeDoubleBE(e,r),8}}I.DoubleBE=Yi;class Zi extends he{constructor(e,t,r){if(!(e instanceof he))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof vt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof vt)&&0<e.span&&(s=t*e.span),super(s,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof vt&&(s=s.decode(e,t)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let n=0;for(;n<s;)r+=this.elementLayout.getSpan(e,t+r),++n}return r}decode(e,t=0){const r=[];let s=0,n=this.count;for(n instanceof vt&&(n=n.decode(e,t));s<n;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return r}encode(e,t,r=0){const s=this.elementLayout,n=e.reduce((a,l)=>a+s.encode(l,t,r+a),0);return this.count instanceof vt&&this.count.encode(e.length,t,r),n}}I.Sequence=Zi;class Ji extends he{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((n,a)=>n&&a instanceof he,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const n of e)if(0>n.span&&n.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((n,a)=>n+a.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,n)=>{const a=n.getSpan(e,t);return t+=a,s+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){vr(e);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const s=r;let n=0,a=0;for(const l of this.fields){let f=l.span;if(a=0<f?f:0,l.property!==void 0){const w=e[l.property];w!==void 0&&(a=l.encode(w,t,r),0>f&&(f=l.getSpan(t,r)))}n=r,r+=f}return n+a-s}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}I.Structure=Ji;class fs{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}I.UnionDiscriminator=fs;class Jr extends fs{constructor(e,t){if(!(e instanceof vt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}I.UnionLayoutDiscriminator=Jr;class ds extends he{constructor(e,t,r){let s;if(e instanceof xt||e instanceof Rt)s=new Jr(new hs(e));else if(e instanceof vt&&e.isCount())s=new Jr(e);else if(e instanceof fs)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof he))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let n=-1;t&&(n=t.span,0<=n&&(e instanceof xt||e instanceof Rt)&&(n+=s.layout.span)),super(n,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof xt||e instanceof Rt,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(l){return a(l)},this.configGetSourceVariant=function(l){a=l.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const s=this.discriminator,n=s.decode(e,t),a=this.registry[n];if(a===void 0){const l=this.defaultLayout;let f=0;this.usesPrefixDiscriminator&&(f=s.layout.span),r=this.makeDestinationObject(),r[s.property]=n,r[l.property]=l.decode(e,t+f)}else r=a.decode(e,t);return r}encode(e,t,r=0){const s=this.getSourceVariant(e);if(s===void 0){const n=this.discriminator,a=this.defaultLayout;let l=0;return this.usesPrefixDiscriminator&&(l=n.layout.span),n.encode(e[n.property],t,r),l+a.encode(e[a.property],t,r+l)}return s.encode(e,t,r)}addVariant(e,t,r){const s=new Xi(this,e,t,r);return this.registry[e]=s,s}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}I.Union=ds;class Xi extends he{constructor(e,t,r,s){if(!(e instanceof ds))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof he))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let n=e.span;0>e.span&&(n=r?r.span:0,0<=n&&e.usesPrefixDiscriminator&&(n+=e.discriminator.layout.span)),super(n,s),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,t+r)),r+s}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let n=s;if(this.layout&&(this.layout.encode(e[this.property],t,r+s),n+=this.layout.getSpan(t,r+s),0<=this.union.span&&n>this.union.span))throw new Error("encoded variant overruns containing union");return n}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}I.VariantLayout=Xi;function lr(i){return 0>i&&(i+=4294967296),i}class ps extends he{constructor(e,t,r){if(!(e instanceof xt||e instanceof Rt))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(n){return s=lr(n),this},this._packedGetValue=function(){return s}}decode(e,t=0){const r=this.makeDestinationObject(),s=this.word.decode(e,t);this._packedSetValue(s);for(const n of this.fields)n.property!==void 0&&(r[n.property]=n.decode(e));return r}encode(e,t,r=0){const s=this.word.decode(t,r);this._packedSetValue(s);for(const n of this.fields)if(n.property!==void 0){const a=e[n.property];a!==void 0&&n.encode(a)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new gs(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new Qi(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}I.BitStructure=ps;class gs{constructor(e,t,r){if(!(e instanceof ps))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const s=8*e.span,n=e.fields.reduce((a,l)=>a+l.bits,0);if(t+n>s)throw new Error("bits too long for span remainder ("+(s-n)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=n,this.container.msb&&(this.start=s-n-t),this.wordMask=lr(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue();return lr(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==lr(e&this.valueMask))throw new TypeError(ls("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=lr(e<<this.start);this.container._packedSetValue(lr(t&~this.wordMask)|r)}}I.BitField=gs;let Qi=class extends gs{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};I.Boolean=Qi;class eo extends he{constructor(e,t){if(!(e instanceof vt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof vt||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),ie(e).slice(t,t+r)}encode(e,t,r){let s=this.length;if(this.length instanceof vt&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(ls("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>t.length)throw new RangeError("encoding overruns Uint8Array");const n=ie(e);return ie(t).write(n.toString("hex"),r,s,"hex"),this.length instanceof vt&&this.length.encode(s,t,r),s}}I.Blob=eo;class to extends he{constructor(e){super(-1,e)}getSpan(e,t=0){vr(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return ie(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const s=us.Buffer.from(e,"utf8"),n=s.length;if(r+n>t.length)throw new RangeError("encoding overruns Buffer");const a=ie(t);return s.copy(a,r),a[r+n]=0,n+1}}I.CString=to;class ro extends he{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return vr(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return ie(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const s=us.Buffer.from(e,"utf8"),n=s.length;if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");if(r+n>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(ie(t),r),n}}I.UTF8=ro;class no extends he{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}I.Constant=no;I.greedy=(i,e)=>new Wi(i,e);var Yt=I.offset=(i,e,t)=>new hs(i,e,t),ne=I.u8=i=>new xt(1,i),At=I.u16=i=>new xt(2,i);I.u24=i=>new xt(3,i);var W=I.u32=i=>new xt(4,i);I.u40=i=>new xt(5,i);I.u48=i=>new xt(6,i);var at=I.nu64=i=>new Di(i);I.u16be=i=>new Rt(2,i);I.u24be=i=>new Rt(3,i);I.u32be=i=>new Rt(4,i);I.u40be=i=>new Rt(5,i);I.u48be=i=>new Rt(6,i);I.nu64be=i=>new qi(i);I.s8=i=>new ir(1,i);I.s16=i=>new ir(2,i);I.s24=i=>new ir(3,i);I.s32=i=>new ir(4,i);I.s40=i=>new ir(5,i);I.s48=i=>new ir(6,i);var St=I.ns64=i=>new Vi(i);I.s16be=i=>new Sr(2,i);I.s24be=i=>new Sr(3,i);I.s32be=i=>new Sr(4,i);I.s40be=i=>new Sr(5,i);I.s48be=i=>new Sr(6,i);I.ns64be=i=>new $i(i);I.f32=i=>new Hi(i);I.f32be=i=>new ji(i);I.f64=i=>new Gi(i);I.f64be=i=>new Yi(i);var D=I.struct=(i,e,t)=>new Ji(i,e,t);I.bits=(i,e,t)=>new ps(i,e,t);var lt=I.seq=(i,e,t)=>new Zi(i,e,t);I.union=(i,e,t)=>new ds(i,e,t);I.unionLayoutDiscriminator=(i,e)=>new Jr(i,e);var ye=I.blob=(i,e)=>new eo(i,e);I.cstr=i=>new to(i);I.utf8=(i,e)=>new ro(i,e);I.constant=(i,e)=>new no(i,e);var Pa=8078e3,Ta=8078001,La=8078004,Ca=8078005,Oa=8078006,Na=8078011;function so(i){return Array.isArray(i)?"%5B"+i.map(so).join("%2C%20")+"%5D":typeof i=="bigint"?`${i}n`:encodeURIComponent(String(i!=null&&Object.getPrototypeOf(i)===null?{...i}:i))}function za([i,e]){return`${i}=${so(e)}`}function Ua(i){const e=Object.entries(i).map(za).join("&");return btoa(e)}function Ka(i,e={}){{let t=`Solana error #${i}; Decode this error by running \`npx @solana/errors decode -- ${i}`;return Object.keys(e).length&&(t+=` '${Ua(e)}'`),`${t}\``}}var dr=class extends Error{constructor(...[e,t]){let r,s;if(t){const{cause:a,...l}=t;a&&(s={cause:a}),Object.keys(l).length>0&&(r=l)}const n=Ka(e,r);super(n,s);rt(this,"cause",this.cause);rt(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function Fa(i,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(i)}function Wa(i){return Object.freeze({...i,encode:e=>{const t=new Uint8Array(Fa(e,i));return i.write(e,t,0),t}})}function Da(i){return Object.freeze({...i,decode:(e,t=0)=>i.read(e,t)[0]})}function ur(i){return"fixedSize"in i&&typeof i.fixedSize=="number"}function qa(i,e){if(ur(i)!==ur(e))throw new dr(La);if(ur(i)&&ur(e)&&i.fixedSize!==e.fixedSize)throw new dr(Ca,{decoderFixedSize:e.fixedSize,encoderFixedSize:i.fixedSize});if(!ur(i)&&!ur(e)&&i.maxSize!==e.maxSize)throw new dr(Oa,{decoderMaxSize:e.maxSize,encoderMaxSize:i.maxSize});return{...e,...i,decode:e.decode,encode:i.encode,read:e.read,write:i.write}}function Va(i,e,t=0){if(e.length-t<=0)throw new dr(Pa,{codecDescription:i})}function $a(i,e,t,r=0){const s=t.length-r;if(s<e)throw new dr(Ta,{bytesLength:s,codecDescription:i,expected:e})}function Ha(i,e,t,r){if(r<e||r>t)throw new dr(Na,{codecDescription:i,max:t,min:e,value:r})}function io(i){return(i==null?void 0:i.endian)!==1}function ja(i){return Wa({fixedSize:i.size,write(e,t,r){i.range&&Ha(i.name,i.range[0],i.range[1],e);const s=new ArrayBuffer(i.size);return i.set(new DataView(s),e,io(i.config)),t.set(new Uint8Array(s),r),r+i.size}})}function Ga(i){return Da({fixedSize:i.size,read(e,t=0){Va(i.name,e,t),$a(i.name,i.size,e,t);const r=new DataView(Ya(e,t,i.size));return[i.get(r,io(i.config)),t+i.size]}})}function Ya(i,e,t){const r=i.byteOffset+(e??0),s=t??i.byteLength;return i.buffer.slice(r,r+s)}var oo=(i={})=>ja({config:i,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),Za=(i={})=>Ga({config:i,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),Ja=(i={})=>qa(oo(i),Za(i));class Xa extends TypeError{constructor(e,t){let r;const{message:s,explanation:n,...a}=e,{path:l}=e,f=l.length===0?s:`At path: ${l.join(".")} -- ${s}`;super(n??f),n!=null&&(this.cause=f),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function Qa(i){return Cr(i)&&typeof i[Symbol.iterator]=="function"}function Cr(i){return typeof i=="object"&&i!=null}function Xr(i){return Cr(i)&&!Array.isArray(i)}function Mt(i){return typeof i=="symbol"?i.toString():typeof i=="string"?JSON.stringify(i):`${i}`}function ec(i){const{done:e,value:t}=i.next();return e?void 0:t}function tc(i,e,t,r){if(i===!0)return;i===!1?i={}:typeof i=="string"&&(i={message:i});const{path:s,branch:n}=e,{type:a}=t,{refinement:l,message:f=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${Mt(r)}\``}=i;return{value:r,type:a,refinement:l,key:s[s.length-1],path:s,branch:n,...i,message:f}}function*ni(i,e,t,r){Qa(i)||(i=[i]);for(const s of i){const n=tc(s,e,t,r);n&&(yield n)}}function*ys(i,e,t={}){const{path:r=[],branch:s=[i],coerce:n=!1,mask:a=!1}=t,l={path:r,branch:s,mask:a};n&&(i=e.coercer(i,l));let f="valid";for(const w of e.validator(i,l))w.explanation=t.message,f="not_valid",yield[w,void 0];for(let[w,v,A]of e.entries(i,l)){const B=ys(v,A,{path:w===void 0?r:[...r,w],branch:w===void 0?s:[...s,v],coerce:n,mask:a,message:t.message});for(const S of B)S[0]?(f=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):n&&(v=S[1],w===void 0?i=v:i instanceof Map?i.set(w,v):i instanceof Set?i.add(v):Cr(i)&&(v!==void 0||w in i)&&(i[w]=v))}if(f!=="not_valid")for(const w of e.refiner(i,l))w.explanation=t.message,f="not_refined",yield[w,void 0];f==="valid"&&(yield[void 0,i])}let Ft=class{constructor(e){const{type:t,schema:r,validator:s,refiner:n,coercer:a=f=>f,entries:l=function*(){}}=e;this.type=t,this.schema=r,this.entries=l,this.coercer=a,s?this.validator=(f,w)=>{const v=s(f,w);return ni(v,w,this,f)}:this.validator=()=>[],n?this.refiner=(f,w)=>{const v=n(f,w);return ni(v,w,this,f)}:this.refiner=()=>[]}assert(e,t){return ao(e,this,t)}create(e,t){return O(e,this,t)}is(e){return co(e,this)}mask(e,t){return rc(e,this,t)}validate(e,t={}){return Or(e,this,t)}};function ao(i,e,t){const r=Or(i,e,{message:t});if(r[0])throw r[0]}function O(i,e,t){const r=Or(i,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function rc(i,e,t){const r=Or(i,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function co(i,e){return!Or(i,e)[0]}function Or(i,e,t={}){const r=ys(i,e,t),s=ec(r);return s[0]?[new Xa(s[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function or(i,e){return new Ft({type:i,schema:null,validator:e})}function nc(){return or("any",()=>!0)}function N(i){return new Ft({type:"array",schema:i,*entries(e){if(i&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,i]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Mt(e)}`}})}function zt(){return or("boolean",i=>typeof i=="boolean")}function ms(i){return or("instance",e=>e instanceof i||`Expected a \`${i.name}\` instance, but received: ${Mt(e)}`)}function we(i){const e=Mt(i),t=typeof i;return new Ft({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?i:null,validator(r){return r===i||`Expected the literal \`${e}\`, but received: ${Mt(r)}`}})}function sc(){return or("never",()=>!1)}function z(i){return new Ft({...i,validator:(e,t)=>e===null||i.validator(e,t),refiner:(e,t)=>e===null||i.refiner(e,t)})}function _(){return or("number",i=>typeof i=="number"&&!isNaN(i)||`Expected a number, but received: ${Mt(i)}`)}function $(i){return new Ft({...i,validator:(e,t)=>e===void 0||i.validator(e,t),refiner:(e,t)=>e===void 0||i.refiner(e,t)})}function uo(i,e){return new Ft({type:"record",schema:null,*entries(t){if(Cr(t))for(const r in t){const s=t[r];yield[r,r,i],yield[r,s,e]}},validator(t){return Xr(t)||`Expected an object, but received: ${Mt(t)}`},coercer(t){return Xr(t)?{...t}:t}})}function T(){return or("string",i=>typeof i=="string"||`Expected a string, but received: ${Mt(i)}`)}function bs(i){const e=sc();return new Ft({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(i.length,t.length);for(let s=0;s<r;s++)yield[s,t[s],i[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Mt(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function M(i){const e=Object.keys(i);return new Ft({type:"type",schema:i,*entries(t){if(Cr(t))for(const r of e)yield[r,t[r],i[r]]},validator(t){return Xr(t)||`Expected an object, but received: ${Mt(t)}`},coercer(t){return Xr(t)?{...t}:t}})}function mt(i){const e=i.map(t=>t.type).join(" | ");return new Ft({type:"union",schema:null,coercer(t,r){for(const s of i){const[n,a]=s.validate(t,{coerce:!0,mask:r.mask});if(!n)return a}return t},validator(t,r){const s=[];for(const n of i){const[...a]=ys(t,n,r),[l]=a;if(l[0])for(const[f]of a)f&&s.push(f);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Mt(t)}`,...s]}})}function _r(){return or("unknown",()=>!0)}function Nr(i,e,t){return new Ft({...i,coercer:(r,s)=>co(r,e)?i.coercer(t(r,s),s):i.coercer(r,s)})}var Fr,ic=new Uint8Array(16);function lo(){if(!Fr&&(Fr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Fr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fr(ic)}const oc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function on(i){return typeof i=="string"&&oc.test(i)}var ot=[];for(var Un=0;Un<256;++Un)ot.push((Un+256).toString(16).substr(1));function an(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(ot[i[e+0]]+ot[i[e+1]]+ot[i[e+2]]+ot[i[e+3]]+"-"+ot[i[e+4]]+ot[i[e+5]]+"-"+ot[i[e+6]]+ot[i[e+7]]+"-"+ot[i[e+8]]+ot[i[e+9]]+"-"+ot[i[e+10]]+ot[i[e+11]]+ot[i[e+12]]+ot[i[e+13]]+ot[i[e+14]]+ot[i[e+15]]).toLowerCase();if(!on(t))throw TypeError("Stringified UUID is invalid");return t}var si,Kn,Fn=0,Wn=0;function ac(i,e,t){var r=e&&t||0,s=e||new Array(16);i=i||{};var n=i.node||si,a=i.clockseq!==void 0?i.clockseq:Kn;if(n==null||a==null){var l=i.random||(i.rng||lo)();n==null&&(n=si=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),a==null&&(a=Kn=(l[6]<<8|l[7])&16383)}var f=i.msecs!==void 0?i.msecs:Date.now(),w=i.nsecs!==void 0?i.nsecs:Wn+1,v=f-Fn+(w-Wn)/1e4;if(v<0&&i.clockseq===void 0&&(a=a+1&16383),(v<0||f>Fn)&&i.nsecs===void 0&&(w=0),w>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Fn=f,Wn=w,Kn=a,f+=122192928e5;var A=((f&268435455)*1e4+w)%4294967296;s[r++]=A>>>24&255,s[r++]=A>>>16&255,s[r++]=A>>>8&255,s[r++]=A&255;var B=f/4294967296*1e4&268435455;s[r++]=B>>>8&255,s[r++]=B&255,s[r++]=B>>>24&15|16,s[r++]=B>>>16&255,s[r++]=a>>>8|128,s[r++]=a&255;for(var S=0;S<6;++S)s[r+S]=n[S];return e||an(s)}function ho(i){if(!on(i))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(i.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(i.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(i.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(i.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(i.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function cc(i){i=unescape(encodeURIComponent(i));for(var e=[],t=0;t<i.length;++t)e.push(i.charCodeAt(t));return e}var uc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",lc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function fo(i,e,t){function r(s,n,a,l){if(typeof s=="string"&&(s=cc(s)),typeof n=="string"&&(n=ho(n)),n.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+s.length);if(f.set(n),f.set(s,n.length),f=t(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,a){l=l||0;for(var w=0;w<16;++w)a[l+w]=f[w];return a}return an(f)}try{r.name=i}catch{}return r.DNS=uc,r.URL=lc,r}function hc(i){if(typeof i=="string"){var e=unescape(encodeURIComponent(i));i=new Uint8Array(e.length);for(var t=0;t<e.length;++t)i[t]=e.charCodeAt(t)}return fc(dc(pc(i),i.length*8))}function fc(i){for(var e=[],t=i.length*32,r="0123456789abcdef",s=0;s<t;s+=8){var n=i[s>>5]>>>s%32&255,a=parseInt(r.charAt(n>>>4&15)+r.charAt(n&15),16);e.push(a)}return e}function po(i){return(i+64>>>9<<4)+14+1}function dc(i,e){i[e>>5]|=128<<e%32,i[po(e)-1]=e;for(var t=1732584193,r=-271733879,s=-1732584194,n=271733878,a=0;a<i.length;a+=16){var l=t,f=r,w=s,v=n;t=ft(t,r,s,n,i[a],7,-680876936),n=ft(n,t,r,s,i[a+1],12,-389564586),s=ft(s,n,t,r,i[a+2],17,606105819),r=ft(r,s,n,t,i[a+3],22,-1044525330),t=ft(t,r,s,n,i[a+4],7,-176418897),n=ft(n,t,r,s,i[a+5],12,1200080426),s=ft(s,n,t,r,i[a+6],17,-1473231341),r=ft(r,s,n,t,i[a+7],22,-45705983),t=ft(t,r,s,n,i[a+8],7,1770035416),n=ft(n,t,r,s,i[a+9],12,-1958414417),s=ft(s,n,t,r,i[a+10],17,-42063),r=ft(r,s,n,t,i[a+11],22,-1990404162),t=ft(t,r,s,n,i[a+12],7,1804603682),n=ft(n,t,r,s,i[a+13],12,-40341101),s=ft(s,n,t,r,i[a+14],17,-1502002290),r=ft(r,s,n,t,i[a+15],22,1236535329),t=dt(t,r,s,n,i[a+1],5,-165796510),n=dt(n,t,r,s,i[a+6],9,-1069501632),s=dt(s,n,t,r,i[a+11],14,643717713),r=dt(r,s,n,t,i[a],20,-373897302),t=dt(t,r,s,n,i[a+5],5,-701558691),n=dt(n,t,r,s,i[a+10],9,38016083),s=dt(s,n,t,r,i[a+15],14,-660478335),r=dt(r,s,n,t,i[a+4],20,-405537848),t=dt(t,r,s,n,i[a+9],5,568446438),n=dt(n,t,r,s,i[a+14],9,-1019803690),s=dt(s,n,t,r,i[a+3],14,-187363961),r=dt(r,s,n,t,i[a+8],20,1163531501),t=dt(t,r,s,n,i[a+13],5,-1444681467),n=dt(n,t,r,s,i[a+2],9,-51403784),s=dt(s,n,t,r,i[a+7],14,1735328473),r=dt(r,s,n,t,i[a+12],20,-1926607734),t=pt(t,r,s,n,i[a+5],4,-378558),n=pt(n,t,r,s,i[a+8],11,-2022574463),s=pt(s,n,t,r,i[a+11],16,1839030562),r=pt(r,s,n,t,i[a+14],23,-35309556),t=pt(t,r,s,n,i[a+1],4,-1530992060),n=pt(n,t,r,s,i[a+4],11,1272893353),s=pt(s,n,t,r,i[a+7],16,-155497632),r=pt(r,s,n,t,i[a+10],23,-1094730640),t=pt(t,r,s,n,i[a+13],4,681279174),n=pt(n,t,r,s,i[a],11,-358537222),s=pt(s,n,t,r,i[a+3],16,-722521979),r=pt(r,s,n,t,i[a+6],23,76029189),t=pt(t,r,s,n,i[a+9],4,-640364487),n=pt(n,t,r,s,i[a+12],11,-421815835),s=pt(s,n,t,r,i[a+15],16,530742520),r=pt(r,s,n,t,i[a+2],23,-995338651),t=gt(t,r,s,n,i[a],6,-198630844),n=gt(n,t,r,s,i[a+7],10,1126891415),s=gt(s,n,t,r,i[a+14],15,-1416354905),r=gt(r,s,n,t,i[a+5],21,-57434055),t=gt(t,r,s,n,i[a+12],6,1700485571),n=gt(n,t,r,s,i[a+3],10,-1894986606),s=gt(s,n,t,r,i[a+10],15,-1051523),r=gt(r,s,n,t,i[a+1],21,-2054922799),t=gt(t,r,s,n,i[a+8],6,1873313359),n=gt(n,t,r,s,i[a+15],10,-30611744),s=gt(s,n,t,r,i[a+6],15,-1560198380),r=gt(r,s,n,t,i[a+13],21,1309151649),t=gt(t,r,s,n,i[a+4],6,-145523070),n=gt(n,t,r,s,i[a+11],10,-1120210379),s=gt(s,n,t,r,i[a+2],15,718787259),r=gt(r,s,n,t,i[a+9],21,-343485551),t=Gt(t,l),r=Gt(r,f),s=Gt(s,w),n=Gt(n,v)}return[t,r,s,n]}function pc(i){if(i.length===0)return[];for(var e=i.length*8,t=new Uint32Array(po(e)),r=0;r<e;r+=8)t[r>>5]|=(i[r/8]&255)<<r%32;return t}function Gt(i,e){var t=(i&65535)+(e&65535),r=(i>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function gc(i,e){return i<<e|i>>>32-e}function cn(i,e,t,r,s,n){return Gt(gc(Gt(Gt(e,i),Gt(r,n)),s),t)}function ft(i,e,t,r,s,n,a){return cn(e&t|~e&r,i,e,s,n,a)}function dt(i,e,t,r,s,n,a){return cn(e&r|t&~r,i,e,s,n,a)}function pt(i,e,t,r,s,n,a){return cn(e^t^r,i,e,s,n,a)}function gt(i,e,t,r,s,n,a){return cn(t^(e|~r),i,e,s,n,a)}var yc=fo("v3",48,hc);function mc(i,e,t){i=i||{};var r=i.random||(i.rng||lo)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return an(r)}function bc(i,e,t,r){switch(i){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function Dn(i,e){return i<<e|i>>>32-e}function wc(i){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){var r=unescape(encodeURIComponent(i));i=[];for(var s=0;s<r.length;++s)i.push(r.charCodeAt(s))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);for(var n=i.length/4+2,a=Math.ceil(n/16),l=new Array(a),f=0;f<a;++f){for(var w=new Uint32Array(16),v=0;v<16;++v)w[v]=i[f*64+v*4]<<24|i[f*64+v*4+1]<<16|i[f*64+v*4+2]<<8|i[f*64+v*4+3];l[f]=w}l[a-1][14]=(i.length-1)*8/Math.pow(2,32),l[a-1][14]=Math.floor(l[a-1][14]),l[a-1][15]=(i.length-1)*8&4294967295;for(var A=0;A<a;++A){for(var B=new Uint32Array(80),S=0;S<16;++S)B[S]=l[A][S];for(var E=16;E<80;++E)B[E]=Dn(B[E-3]^B[E-8]^B[E-14]^B[E-16],1);for(var R=t[0],x=t[1],P=t[2],V=t[3],F=t[4],G=0;G<80;++G){var ue=Math.floor(G/20),oe=Dn(R,5)+bc(ue,x,P,V)+F+e[ue]+B[G]>>>0;F=V,V=P,P=Dn(x,30)>>>0,x=R,R=oe}t[0]=t[0]+R>>>0,t[1]=t[1]+x>>>0,t[2]=t[2]+P>>>0,t[3]=t[3]+V>>>0,t[4]=t[4]+F>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var kc=fo("v5",80,wc);const vc="00000000-0000-0000-0000-000000000000";function Sc(i){if(!on(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}const _c=Object.freeze(Object.defineProperty({__proto__:null,NIL:vc,parse:ho,stringify:an,v1:ac,v3:yc,v4:mc,v5:kc,validate:on,version:Sc},Symbol.toStringTag,{value:"Module"})),go=Ei(_c),Ic=go.v4,Ec=function(i,e,t,r){if(typeof i!="string")throw new TypeError(i+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const n={method:i};if(s===2&&(n.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");n.params=e}if(typeof t>"u"){const a=typeof r.generator=="function"?r.generator:function(){return Ic()};n.id=a(n,r)}else s===2&&t===null?r.notificationIdNull&&(n.id=null):n.id=t;return n};var Ac=Ec;const xc=go.v4,Rc=Ac,Br=function(i,e){if(!(this instanceof Br))return new Br(i,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return xc()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=i};var Bc=Br;Br.prototype.request=function(i,e,t,r){const s=this;let n=null;const a=Array.isArray(i)&&typeof e=="function";if(this.options.version===1&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&i&&typeof i=="object"&&typeof e=="function")r=e,n=i;else{typeof t=="function"&&(r=t,t=void 0);const w=typeof r=="function";try{n=Rc(i,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(v){if(w)return r(v);throw v}if(!w)return n}let f;try{f=JSON.stringify(n,this.options.replacer)}catch(w){return r(w)}return this.callServer(f,function(w,v){s._parseResponse(w,v,r)}),n};Br.prototype._parseResponse=function(i,e,t){if(i){t(i);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return t(s)}if(t.length===3)if(Array.isArray(r)){const s=function(a){return typeof a.error<"u"},n=function(a){return!s(a)};return t(null,r.filter(s),r.filter(n))}else return t(null,r.error,r.result);t(null,r)};const Mc=tn(Bc);var yo={exports:{}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(f,w,v){this.fn=f,this.context=w,this.once=v||!1}function n(f,w,v,A,B){if(typeof v!="function")throw new TypeError("The listener must be a function");var S=new s(v,A||f,B),E=t?t+w:w;return f._events[E]?f._events[E].fn?f._events[E]=[f._events[E],S]:f._events[E].push(S):(f._events[E]=S,f._eventsCount++),f}function a(f,w){--f._eventsCount===0?f._events=new r:delete f._events[w]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var w=[],v,A;if(this._eventsCount===0)return w;for(A in v=this._events)e.call(v,A)&&w.push(t?A.slice(1):A);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(v)):w},l.prototype.listeners=function(w){var v=t?t+w:w,A=this._events[v];if(!A)return[];if(A.fn)return[A.fn];for(var B=0,S=A.length,E=new Array(S);B<S;B++)E[B]=A[B].fn;return E},l.prototype.listenerCount=function(w){var v=t?t+w:w,A=this._events[v];return A?A.fn?1:A.length:0},l.prototype.emit=function(w,v,A,B,S,E){var R=t?t+w:w;if(!this._events[R])return!1;var x=this._events[R],P=arguments.length,V,F;if(x.fn){switch(x.once&&this.removeListener(w,x.fn,void 0,!0),P){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,v),!0;case 3:return x.fn.call(x.context,v,A),!0;case 4:return x.fn.call(x.context,v,A,B),!0;case 5:return x.fn.call(x.context,v,A,B,S),!0;case 6:return x.fn.call(x.context,v,A,B,S,E),!0}for(F=1,V=new Array(P-1);F<P;F++)V[F-1]=arguments[F];x.fn.apply(x.context,V)}else{var G=x.length,ue;for(F=0;F<G;F++)switch(x[F].once&&this.removeListener(w,x[F].fn,void 0,!0),P){case 1:x[F].fn.call(x[F].context);break;case 2:x[F].fn.call(x[F].context,v);break;case 3:x[F].fn.call(x[F].context,v,A);break;case 4:x[F].fn.call(x[F].context,v,A,B);break;default:if(!V)for(ue=1,V=new Array(P-1);ue<P;ue++)V[ue-1]=arguments[ue];x[F].fn.apply(x[F].context,V)}}return!0},l.prototype.on=function(w,v,A){return n(this,w,v,A,!1)},l.prototype.once=function(w,v,A){return n(this,w,v,A,!0)},l.prototype.removeListener=function(w,v,A,B){var S=t?t+w:w;if(!this._events[S])return this;if(!v)return a(this,S),this;var E=this._events[S];if(E.fn)E.fn===v&&(!B||E.once)&&(!A||E.context===A)&&a(this,S);else{for(var R=0,x=[],P=E.length;R<P;R++)(E[R].fn!==v||B&&!E[R].once||A&&E[R].context!==A)&&x.push(E[R]);x.length?this._events[S]=x.length===1?x[0]:x:a(this,S)}return this},l.prototype.removeAllListeners=function(w){var v;return w?(v=t?t+w:w,this._events[v]&&a(this,v)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,i.exports=l})(yo);var Pc=yo.exports;const mo=tn(Pc);var Tc=class extends mo{constructor(e,t,r){super();rt(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,t,r){const s=r||t;try{this.socket.send(e),s()}catch(n){s(n)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function Lc(i,e){return new Tc(i,e)}var Cc=class{encode(i){return JSON.stringify(i)}decode(i){return JSON.parse(i)}},Oc=class extends mo{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:n=1e3,max_reconnects:a=5,...l}={},f,w){super();rt(this,"address");rt(this,"rpc_id");rt(this,"queue");rt(this,"options");rt(this,"autoconnect");rt(this,"ready");rt(this,"reconnect");rt(this,"reconnect_timer_id");rt(this,"reconnect_interval");rt(this,"max_reconnects");rt(this,"rest_options");rt(this,"current_reconnects");rt(this,"generate_request_id");rt(this,"socket");rt(this,"webSocketFactory");rt(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=n,this.max_reconnects=a,this.rest_options=l,this.current_reconnects=0,this.generate_request_id=f||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),w?this.dataPack=w:this.dataPack=new Cc,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((n,a)=>{if(!this.ready)return a(new Error("socket not ready"));const l=this.generate_request_id(e,t),f={jsonrpc:"2.0",method:e,params:t||void 0,id:l};this.socket.send(this.dataPack.encode(f),s,w=>{if(w)return a(w);this.queue[l]={promise:[n,a]},r&&(this.queue[l].timeout=setTimeout(()=>{delete this.queue[l],a(new Error("reply timeout"))},r))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const n={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(n),a=>{if(a)return s(a);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=H.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let n=0;n<r.params.length;n++)s.push(r.params[n]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,s),1))})}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ii=(i,e)=>(i+(i>=0?e:-e)/bo)/e;function Nc(i,e,t){const[[r,s],[n,a]]=e,l=ii(a*i,t),f=ii(-s*i,t);let w=i-l*r-f*n,v=-l*s-f*a;const A=w<$t,B=v<$t;A&&(w=-w),B&&(v=-v);const S=Bi(Math.ceil(ia(t)/2))+pr;if(w<$t||w>=S||v<$t||v>=S)throw new Error("splitScalar (endomorphism): failed, k="+i);return{k1neg:A,k1:w,k2neg:B,k2:v}}function Xn(i){if(!["compact","recovered","der"].includes(i))throw new Error('Signature format must be "compact", "recovered", or "der"');return i}function qn(i,e){const t={};for(let r of Object.keys(e))t[r]=i[r]===void 0?e[r]:i[r];return Hr(t.lowS,"lowS"),Hr(t.prehash,"prehash"),t.format!==void 0&&Xn(t.format),t}class zc extends Error{constructor(e=""){super(e)}}const Dt={Err:zc,_tlv:{encode:(i,e)=>{const{Err:t}=Dt;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,s=Ur(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const n=r>127?Ur(s.length/2|128):"";return Ur(i)+n+s+e},decode(i,e){const{Err:t}=Dt;let r=0;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==i)throw new t("tlv.decode: wrong tlv");const s=e[r++],n=!!(s&128);let a=0;if(!n)a=s;else{const f=s&127;if(!f)throw new t("tlv.decode(long): indefinite length not supported");if(f>4)throw new t("tlv.decode(long): byte length is too big");const w=e.subarray(r,r+f);if(w.length!==f)throw new t("tlv.decode: length bytes not complete");if(w[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const v of w)a=a<<8|v;if(r+=f,a<128)throw new t("tlv.decode(long): not minimal encoding")}const l=e.subarray(r,r+a);if(l.length!==a)throw new t("tlv.decode: wrong value length");return{v:l,l:e.subarray(r+a)}}},_int:{encode(i){const{Err:e}=Dt;if(i<$t)throw new e("integer: negative integers are not allowed");let t=Ur(i);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(i){const{Err:e}=Dt;if(i[0]&128)throw new e("invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ri(i)}},toSig(i){const{Err:e,_int:t,_tlv:r}=Dt,s=bt("signature",i),{v:n,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:f}=r.decode(2,n),{v:w,l:v}=r.decode(2,f);if(v.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(w)}},hexFromSig(i){const{_tlv:e,_int:t}=Dt,r=e.encode(2,t.encode(i.r)),s=e.encode(2,t.encode(i.s)),n=r+s;return e.encode(48,n)}},$t=BigInt(0),pr=BigInt(1),bo=BigInt(2),Wr=BigInt(3),Uc=BigInt(4);function hr(i,e){const{BYTES:t}=i;let r;if(typeof e=="bigint")r=e;else{let s=bt("private key",e);try{r=i.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!i.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Kc(i,e={}){const t=Go("weierstrass",i,e),{Fp:r,Fn:s}=t;let n=t.CURVE;const{h:a,n:l}=n;Ai(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=e;if(f&&(!r.is0(n.a)||typeof f.beta!="bigint"||!Array.isArray(f.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const w=ko(r,s);function v(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function A(Q,d,o){const{x:u,y:h}=d.toAffine(),p=r.toBytes(u);if(Hr(o,"isCompressed"),o){v();const y=!r.isOdd(h);return Jt(wo(y),p)}else return Jt(Uint8Array.of(4),p,r.toBytes(h))}function B(Q){tr(Q,void 0,"Point");const{publicKey:d,publicKeyUncompressed:o}=w,u=Q.length,h=Q[0],p=Q.subarray(1);if(u===d&&(h===2||h===3)){const y=r.fromBytes(p);if(!r.isValid(y))throw new Error("bad point: is not on curve, wrong x");const b=R(y);let k;try{k=r.sqrt(b)}catch(m){const U=m instanceof Error?": "+m.message:"";throw new Error("bad point: is not on curve, sqrt error"+U)}v();const g=r.isOdd(k);return(h&1)===1!==g&&(k=r.neg(k)),{x:y,y:k}}else if(u===o&&h===4){const y=r.BYTES,b=r.fromBytes(p.subarray(0,y)),k=r.fromBytes(p.subarray(y,y*2));if(!x(b,k))throw new Error("bad point: is not on curve");return{x:b,y:k}}else throw new Error(`bad point: got length ${u}, expected compressed=${d} or uncompressed=${o}`)}const S=e.toBytes||A,E=e.fromBytes||B;function R(Q){const d=r.sqr(Q),o=r.mul(d,Q);return r.add(r.add(o,r.mul(Q,n.a)),n.b)}function x(Q,d){const o=r.sqr(d),u=R(Q);return r.eql(o,u)}if(!x(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const P=r.mul(r.pow(n.a,Wr),Uc),V=r.mul(r.sqr(n.b),BigInt(27));if(r.is0(r.add(P,V)))throw new Error("bad curve params: a or b");function F(Q,d,o=!1){if(!r.isValid(d)||o&&r.is0(d))throw new Error(`bad point coordinate ${Q}`);return d}function G(Q){if(!(Q instanceof X))throw new Error("ProjectivePoint expected")}function ue(Q){if(!f||!f.basises)throw new Error("no endo");return Nc(Q,f.basises,s.ORDER)}const oe=Js((Q,d)=>{const{X:o,Y:u,Z:h}=Q;if(r.eql(h,r.ONE))return{x:o,y:u};const p=Q.is0();d==null&&(d=p?r.ONE:r.inv(h));const y=r.mul(o,d),b=r.mul(u,d),k=r.mul(h,d);if(p)return{x:r.ZERO,y:r.ZERO};if(!r.eql(k,r.ONE))throw new Error("invZ was invalid");return{x:y,y:b}}),me=Js(Q=>{if(Q.is0()){if(e.allowInfinityPoint&&!r.is0(Q.Y))return;throw new Error("bad point: ZERO")}const{x:d,y:o}=Q.toAffine();if(!r.isValid(d)||!r.isValid(o))throw new Error("bad point: x or y not field elements");if(!x(d,o))throw new Error("bad point: equation left != right");if(!Q.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ht(Q,d,o,u,h){return o=new X(r.mul(o.X,Q),o.Y,o.Z),d=Qs(u,d),o=Qs(h,o),d.add(o)}class X{constructor(d,o,u){this.X=F("x",d),this.Y=F("y",o,!0),this.Z=F("z",u),Object.freeze(this)}static CURVE(){return n}static fromAffine(d){const{x:o,y:u}=d||{};if(!d||!r.isValid(o)||!r.isValid(u))throw new Error("invalid affine point");if(d instanceof X)throw new Error("projective point not allowed");return r.is0(o)&&r.is0(u)?X.ZERO:new X(o,u,r.ONE)}static fromBytes(d){const o=X.fromAffine(E(tr(d,void 0,"point")));return o.assertValidity(),o}static fromHex(d){return X.fromBytes(bt("pointHex",d))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(d=8,o=!0){return le.createCache(this,d),o||this.multiply(Wr),this}assertValidity(){me(this)}hasEvenY(){const{y:d}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(d)}equals(d){G(d);const{X:o,Y:u,Z:h}=this,{X:p,Y:y,Z:b}=d,k=r.eql(r.mul(o,b),r.mul(p,h)),g=r.eql(r.mul(u,b),r.mul(y,h));return k&&g}negate(){return new X(this.X,r.neg(this.Y),this.Z)}double(){const{a:d,b:o}=n,u=r.mul(o,Wr),{X:h,Y:p,Z:y}=this;let b=r.ZERO,k=r.ZERO,g=r.ZERO,c=r.mul(h,h),m=r.mul(p,p),U=r.mul(y,y),C=r.mul(h,p);return C=r.add(C,C),g=r.mul(h,y),g=r.add(g,g),b=r.mul(d,g),k=r.mul(u,U),k=r.add(b,k),b=r.sub(m,k),k=r.add(m,k),k=r.mul(b,k),b=r.mul(C,b),g=r.mul(u,g),U=r.mul(d,U),C=r.sub(c,U),C=r.mul(d,C),C=r.add(C,g),g=r.add(c,c),c=r.add(g,c),c=r.add(c,U),c=r.mul(c,C),k=r.add(k,c),U=r.mul(p,y),U=r.add(U,U),c=r.mul(U,C),b=r.sub(b,c),g=r.mul(U,m),g=r.add(g,g),g=r.add(g,g),new X(b,k,g)}add(d){G(d);const{X:o,Y:u,Z:h}=this,{X:p,Y:y,Z:b}=d;let k=r.ZERO,g=r.ZERO,c=r.ZERO;const m=n.a,U=r.mul(n.b,Wr);let C=r.mul(o,p),K=r.mul(u,y),te=r.mul(h,b),Y=r.add(o,u),j=r.add(p,y);Y=r.mul(Y,j),j=r.add(C,K),Y=r.sub(Y,j),j=r.add(o,h);let nt=r.add(p,b);return j=r.mul(j,nt),nt=r.add(C,te),j=r.sub(j,nt),nt=r.add(u,h),k=r.add(y,b),nt=r.mul(nt,k),k=r.add(K,te),nt=r.sub(nt,k),c=r.mul(m,j),k=r.mul(U,te),c=r.add(k,c),k=r.sub(K,c),c=r.add(K,c),g=r.mul(k,c),K=r.add(C,C),K=r.add(K,C),te=r.mul(m,te),j=r.mul(U,j),K=r.add(K,te),te=r.sub(C,te),te=r.mul(m,te),j=r.add(j,te),C=r.mul(K,j),g=r.add(g,C),C=r.mul(nt,j),k=r.mul(Y,k),k=r.sub(k,C),C=r.mul(Y,K),c=r.mul(nt,c),c=r.add(c,C),new X(k,g,c)}subtract(d){return this.add(d.negate())}is0(){return this.equals(X.ZERO)}multiply(d){const{endo:o}=e;if(!s.isValidNot0(d))throw new Error("invalid scalar: out of range");let u,h;const p=y=>le.cached(this,y,b=>On(X,b));if(o){const{k1neg:y,k1:b,k2neg:k,k2:g}=ue(d),{p:c,f:m}=p(b),{p:U,f:C}=p(g);h=m.add(C),u=ht(o.beta,c,U,y,k)}else{const{p:y,f:b}=p(d);u=y,h=b}return On(X,[u,h])[0]}multiplyUnsafe(d){const{endo:o}=e,u=this;if(!s.isValid(d))throw new Error("invalid scalar: out of range");if(d===$t||u.is0())return X.ZERO;if(d===pr)return u;if(le.hasCache(this))return this.multiply(d);if(o){const{k1neg:h,k1:p,k2neg:y,k2:b}=ue(d),{p1:k,p2:g}=Qo(X,u,p,b);return ht(o.beta,k,g,h,y)}else return le.unsafe(u,d)}multiplyAndAddUnsafe(d,o,u){const h=this.multiplyUnsafe(o).add(d.multiplyUnsafe(u));return h.is0()?void 0:h}toAffine(d){return oe(this,d)}isTorsionFree(){const{isTorsionFree:d}=e;return a===pr?!0:d?d(X,this):le.unsafe(this,l).is0()}clearCofactor(){const{clearCofactor:d}=e;return a===pr?this:d?d(X,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(d=!0){return Hr(d,"isCompressed"),this.assertValidity(),S(X,this,d)}toHex(d=!0){return qr(this.toBytes(d))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(d=!0){return this.toBytes(d)}_setWindowSize(d){this.precompute(d)}static normalizeZ(d){return On(X,d)}static msm(d,o){return ea(X,s,d,o)}static fromPrivateKey(d){return X.BASE.multiply(hr(s,d))}}X.BASE=new X(n.Gx,n.Gy,r.ONE),X.ZERO=new X(r.ZERO,r.ONE,r.ZERO),X.Fp=r,X.Fn=s;const Ht=s.BITS,le=new Yo(X,e.endo?Math.ceil(Ht/2):Ht);return X.BASE.precompute(8),X}function wo(i){return Uint8Array.of(i?2:3)}function ko(i,e){return{secretKey:e.BYTES,publicKey:1+i.BYTES,publicKeyUncompressed:1+2*i.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Fc(i,e={}){const{Fn:t}=i,r=e.randomBytes||xi,s=Object.assign(ko(i.Fp,t),{seed:ta(t.ORDER)});function n(S){try{return!!hr(t,S)}catch{return!1}}function a(S,E){const{publicKey:R,publicKeyUncompressed:x}=s;try{const P=S.length;return E===!0&&P!==R||E===!1&&P!==x?!1:!!i.fromBytes(S)}catch{return!1}}function l(S=r(s.seed)){return na(tr(S,s.seed,"seed"),t.ORDER)}function f(S,E=!0){return i.BASE.multiply(hr(t,S)).toBytes(E)}function w(S){const E=l(S);return{secretKey:E,publicKey:f(E)}}function v(S){if(typeof S=="bigint")return!1;if(S instanceof i)return!0;const{secretKey:E,publicKey:R,publicKeyUncompressed:x}=s;if(t.allowedLengths||E===R)return;const P=bt("key",S).length;return P===R||P===x}function A(S,E,R=!0){if(v(S)===!0)throw new Error("first arg must be private key");if(v(E)===!1)throw new Error("second arg must be public key");const x=hr(t,S);return i.fromHex(E).multiply(x).toBytes(R)}return Object.freeze({getPublicKey:f,getSharedSecret:A,keygen:w,Point:i,utils:{isValidSecretKey:n,isValidPublicKey:a,randomSecretKey:l,isValidPrivateKey:n,randomPrivateKey:l,normPrivateKeyToScalar:S=>hr(t,S),precompute(S=8,E=i.BASE){return E.precompute(S,!1)}},lengths:s})}function Wc(i,e,t={}){Zo(e),Ai(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||xi,s=t.hmac||((o,...u)=>Jo(e,o,Jt(...u))),{Fp:n,Fn:a}=i,{ORDER:l,BITS:f}=a,{keygen:w,getPublicKey:v,getSharedSecret:A,utils:B,lengths:S}=Fc(i,t),E={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},R="compact";function x(o){const u=l>>pr;return o>u}function P(o,u){if(!a.isValidNot0(u))throw new Error(`invalid signature ${o}: out of range 1..Point.Fn.ORDER`);return u}function V(o,u){Xn(u);const h=S.signature,p=u==="compact"?h:u==="recovered"?h+1:void 0;return tr(o,p,`${u} signature`)}class F{constructor(u,h,p){this.r=P("r",u),this.s=P("s",h),p!=null&&(this.recovery=p),Object.freeze(this)}static fromBytes(u,h=R){V(u,h);let p;if(h==="der"){const{r:g,s:c}=Dt.toSig(tr(u));return new F(g,c)}h==="recovered"&&(p=u[0],h="compact",u=u.subarray(1));const y=a.BYTES,b=u.subarray(0,y),k=u.subarray(y,y*2);return new F(a.fromBytes(b),a.fromBytes(k),p)}static fromHex(u,h){return this.fromBytes(Xs(u),h)}addRecoveryBit(u){return new F(this.r,this.s,u)}recoverPublicKey(u){const h=n.ORDER,{r:p,s:y,recovery:b}=this;if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");if(l*bo<h&&b>1)throw new Error("recovery id is ambiguous for h>1 curve");const g=b===2||b===3?p+l:p;if(!n.isValid(g))throw new Error("recovery id 2 or 3 invalid");const c=n.toBytes(g),m=i.fromBytes(Jt(wo((b&1)===0),c)),U=a.inv(g),C=ue(bt("msgHash",u)),K=a.create(-C*U),te=a.create(y*U),Y=i.BASE.multiplyUnsafe(K).add(m.multiplyUnsafe(te));if(Y.is0())throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return x(this.s)}toBytes(u=R){if(Xn(u),u==="der")return Xs(Dt.hexFromSig(this));const h=a.toBytes(this.r),p=a.toBytes(this.s);if(u==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Jt(Uint8Array.of(this.recovery),h,p)}return Jt(h,p)}toHex(u){return qr(this.toBytes(u))}assertValidity(){}static fromCompact(u){return F.fromBytes(bt("sig",u),"compact")}static fromDER(u){return F.fromBytes(bt("sig",u),"der")}normalizeS(){return this.hasHighS()?new F(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return qr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return qr(this.toBytes("compact"))}}const G=t.bits2int||function(u){if(u.length>8192)throw new Error("input is too large");const h=Ri(u),p=u.length*8-f;return p>0?h>>BigInt(p):h},ue=t.bits2int_modN||function(u){return a.create(G(u))},oe=Bi(f);function me(o){return oa("num < 2^"+f,o,$t,oe),a.toBytes(o)}function ht(o,u){return tr(o,void 0,"message"),u?tr(e(o),void 0,"prehashed message"):o}function X(o,u,h){if(["recovered","canonical"].some(K=>K in h))throw new Error("sign() legacy options not supported");const{lowS:p,prehash:y,extraEntropy:b}=qn(h,E);o=ht(o,y);const k=ue(o),g=hr(a,u),c=[me(g),me(k)];if(b!=null&&b!==!1){const K=b===!0?r(S.secretKey):b;c.push(bt("extraEntropy",K))}const m=Jt(...c),U=k;function C(K){const te=G(K);if(!a.isValidNot0(te))return;const Y=a.inv(te),j=i.BASE.multiply(te).toAffine(),nt=a.create(j.x);if(nt===$t)return;const ge=a.create(Y*a.create(U+nt*g));if(ge===$t)return;let be=(j.x===nt?0:2)|Number(j.y&pr),Ar=ge;return p&&x(ge)&&(Ar=a.neg(ge),be^=1),new F(nt,Ar,be)}return{seed:m,k2sig:C}}function Ht(o,u,h={}){o=bt("message",o);const{seed:p,k2sig:y}=X(o,u,h);return ra(e.outputLen,a.BYTES,s)(p,y)}function le(o){let u;const h=typeof o=="string"||sa(o),p=!h&&o!==null&&typeof o=="object"&&typeof o.r=="bigint"&&typeof o.s=="bigint";if(!h&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(p)u=new F(o.r,o.s);else if(h){try{u=F.fromBytes(bt("sig",o),"der")}catch(y){if(!(y instanceof Dt.Err))throw y}if(!u)try{u=F.fromBytes(bt("sig",o),"compact")}catch{return!1}}return u||!1}function Q(o,u,h,p={}){const{lowS:y,prehash:b,format:k}=qn(p,E);if(h=bt("publicKey",h),u=ht(bt("message",u),b),"strict"in p)throw new Error("options.strict was renamed to lowS");const g=k===void 0?le(o):F.fromBytes(bt("sig",o),k);if(g===!1)return!1;try{const c=i.fromBytes(h);if(y&&g.hasHighS())return!1;const{r:m,s:U}=g,C=ue(u),K=a.inv(U),te=a.create(C*K),Y=a.create(m*K),j=i.BASE.multiplyUnsafe(te).add(c.multiplyUnsafe(Y));return j.is0()?!1:a.create(j.x)===m}catch{return!1}}function d(o,u,h={}){const{prehash:p}=qn(h,E);return u=ht(u,p),F.fromBytes(o,"recovered").recoverPublicKey(u).toBytes()}return Object.freeze({keygen:w,getPublicKey:v,getSharedSecret:A,utils:B,lengths:S,Point:i,sign:Ht,verify:Q,recoverPublicKey:d,Signature:F,hash:e})}function Dc(i){const e={a:i.a,b:i.b,p:i.Fp.ORDER,n:i.n,h:i.h,Gx:i.Gx,Gy:i.Gy},t=i.Fp;let r=i.allowedPrivateKeyLengths?Array.from(new Set(i.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const s=Mi(e.n,{BITS:i.nBitLength,allowedLengths:r,modFromBytes:i.wrapPrivateKey}),n={Fp:t,Fn:s,allowInfinityPoint:i.allowInfinityPoint,endo:i.endo,isTorsionFree:i.isTorsionFree,clearCofactor:i.clearCofactor,fromBytes:i.fromBytes,toBytes:i.toBytes};return{CURVE:e,curveOpts:n}}function qc(i){const{CURVE:e,curveOpts:t}=Dc(i),r={hmac:i.hmac,randomBytes:i.randomBytes,lowS:i.lowS,bits2int:i.bits2int,bits2int_modN:i.bits2int_modN};return{CURVE:e,curveOpts:t,hash:i.hash,ecdsaOpts:r}}function Vc(i,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},i,Xo(t.Fn.ORDER,t.Fn.BITS))})}function $c(i){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:s}=qc(i),n=Kc(e,t),a=Wc(n,r,s);return Vc(i,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hc(i,e){const t=r=>$c({...i,hash:r});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ws={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},jc={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},oi=BigInt(2);function Gc(i){const e=ws.p,t=BigInt(3),r=BigInt(6),s=BigInt(11),n=BigInt(22),a=BigInt(23),l=BigInt(44),f=BigInt(88),w=i*i*i%e,v=w*w*i%e,A=Et(v,t,e)*v%e,B=Et(A,t,e)*v%e,S=Et(B,oi,e)*w%e,E=Et(S,s,e)*S%e,R=Et(E,n,e)*E%e,x=Et(R,l,e)*R%e,P=Et(x,f,e)*x%e,V=Et(P,l,e)*R%e,F=Et(V,t,e)*v%e,G=Et(F,a,e)*E%e,ue=Et(G,r,e)*w%e,oe=Et(ue,oi,e);if(!Qn.eql(Qn.sqr(oe),i))throw new Error("Cannot find square root");return oe}const Qn=Mi(ws.p,{sqrt:Gc}),ks=Hc({...ws,Fp:Qn,lowS:!0,endo:jc},aa),Yc=kr.utils.randomPrivateKey,ai=()=>{const i=kr.utils.randomPrivateKey(),e=Qr(i),t=new Uint8Array(64);return t.set(i),t.set(e,32),{publicKey:e,secretKey:t}},Qr=kr.getPublicKey;function ci(i){try{return kr.ExtendedPoint.fromHex(i),!0}catch{return!1}}const vs=(i,e)=>kr.sign(i,e.slice(0,32)),Zc=kr.verify,J=i=>H.Buffer.isBuffer(i)?i:i instanceof Uint8Array?H.Buffer.from(i.buffer,i.byteOffset,i.byteLength):H.Buffer.from(i);class Ss{constructor(e){Object.assign(this,e)}encode(){return H.Buffer.from(Ki(Rr,this))}static decode(e){return Fi(Rr,this,e)}static decodeUnchecked(e){return Ci(Rr,this,e)}}class Jc extends Ss{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Rr=new Map;var vo;const So=32,Nt=32;function Xc(i){return i._bn!==void 0}let ui=1;class L extends Ss{constructor(e){if(super({}),this._bn=void 0,Xc(e))this._bn=e._bn;else{if(typeof e=="string"){const t=ut.decode(e);if(t.length!=Nt)throw new Error("Invalid public key input");this._bn=new ri(t)}else this._bn=new ri(e);if(this._bn.byteLength()>Nt)throw new Error("Invalid public key input")}}static unique(){const e=new L(ui);return ui+=1,new L(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ut.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(H.Buffer);if(e.length===Nt)return e;const t=H.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const s=H.Buffer.concat([e.toBuffer(),H.Buffer.from(t),r.toBuffer()]),n=ei(s);return new L(n)}static createProgramAddressSync(e,t){let r=H.Buffer.alloc(0);e.forEach(function(n){if(n.length>So)throw new TypeError("Max seed length exceeded");r=H.Buffer.concat([r,J(n)])}),r=H.Buffer.concat([r,t.toBuffer(),H.Buffer.from("ProgramDerivedAddress")]);const s=ei(r);if(ci(s))throw new Error("Invalid seeds, address must fall off the curve");return new L(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,s;for(;r!=0;){try{const n=e.concat(H.Buffer.from([r]));s=this.createProgramAddressSync(n,t)}catch(n){if(n instanceof TypeError)throw n;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new L(e);return ci(t.toBytes())}}vo=L;L.default=new vo("11111111111111111111111111111111");Rr.set(L,{kind:"struct",fields:[["_bn","u256"]]});class Qc{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=J(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=J(Yc()),this._publicKey=J(Qr(this._secretKey))}get publicKey(){return new L(this._publicKey)}get secretKey(){return H.Buffer.concat([this._secretKey,this._publicKey],64)}}const eu=new L("BPFLoader1111111111111111111111111111111111"),Zt=1232,un=127,Mr=64;class _s extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(_s.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Is extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Is.prototype,"name",{value:"TransactionExpiredTimeoutError"});class fr extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(fr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Pr{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((n,a)=>{r.set(n.toBase58(),a)});const s=n=>{const a=r.get(n.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(n=>({programIdIndex:s(n.programId),accountKeyIndexes:n.keys.map(a=>s(a.pubkey)),data:n.data}))}}const ee=(i="publicKey")=>ye(32,i),tu=(i="signature")=>ye(64,i),rr=(i="string")=>{const e=D([W("length"),W("lengthPadding"),ye(Yt(W(),-8),"chars")],i),t=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(n,a)=>t(n,a).chars.toString(),s.encode=(n,a,l)=>{const f={chars:H.Buffer.from(n,"utf8")};return r(f,a,l)},s.alloc=n=>W().span+W().span+H.Buffer.from(n,"utf8").length,s},ru=(i="authorized")=>D([ee("staker"),ee("withdrawer")],i),nu=(i="lockup")=>D([St("unixTimestamp"),St("epoch"),ee("custodian")],i),su=(i="voteInit")=>D([ee("nodePubkey"),ee("authorizedVoter"),ee("authorizedWithdrawer"),ne("commission")],i),iu=(i="voteAuthorizeWithSeedArgs")=>D([W("voteAuthorizationType"),ee("currentAuthorityDerivedKeyOwnerPubkey"),rr("currentAuthorityDerivedKeySeed"),ee("newAuthorized")],i);function _o(i,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const n=e[s.property];if(Array.isArray(n))return n.length*t(s.elementLayout)}else if("fields"in s)return _o({layout:s},e[s.property]);return 0};let r=0;return i.layout.fields.forEach(s=>{r+=t(s)}),r}function wt(i){let e=0,t=0;for(;;){let r=i.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function _t(i,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){i.push(r);break}else r|=128,i.push(r)}}function se(i,e){if(!i)throw new Error(e||"Assertion failed")}class ln{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,s=a=>{const l=a.toBase58();let f=r.get(l);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(l,f)),f},n=s(t);n.isSigner=!0,n.isWritable=!0;for(const a of e){s(a.programId).isInvoked=!0;for(const l of a.keys){const f=s(l.pubkey);f.isSigner||(f.isSigner=l.isSigner),f.isWritable||(f.isWritable=l.isWritable)}}return new ln(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];se(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),r=e.filter(([,f])=>f.isSigner&&!f.isWritable),s=e.filter(([,f])=>!f.isSigner&&f.isWritable),n=e.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:n.length};{se(t.length>0,"Expected at least one writable signer key");const[f]=t[0];se(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...t.map(([f])=>new L(f)),...r.map(([f])=>new L(f)),...s.map(([f])=>new L(f)),...n.map(([f])=>new L(f))];return[a,l]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[s,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:r,readonly:n}]}drainKeysFoundInLookupTable(e,t){const r=new Array,s=new Array;for(const[n,a]of this.keyMetaMap.entries())if(t(a)){const l=new L(n),f=e.findIndex(w=>w.equals(l));f>=0&&(se(f<256,"Max lookup table index exceeded"),r.push(f),s.push(l),this.keyMetaMap.delete(n))}return[r,s]}}const Io="Reached end of buffer unexpectedly";function Lt(i){if(i.length===0)throw new Error(Io);return i.shift()}function kt(i,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>i.length:t>=i.length)throw new Error(Io);return i.splice(...e)}class Pt{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new L(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ut.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Pr(this.staticAccountKeys)}static compile(e){const t=ln.compile(e.instructions,e.payerKey),[r,s]=t.getMessageComponents(),a=new Pr(s).compileInstructions(e.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:ut.encode(l.data)}));return new Pt({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,n=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<n}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];_t(t,e);const r=this.instructions.map(A=>{const{accounts:B,programIdIndex:S}=A,E=Array.from(ut.decode(A.data));let R=[];_t(R,B.length);let x=[];return _t(x,E.length),{programIdIndex:S,keyIndicesCount:H.Buffer.from(R),keyIndices:B,dataLength:H.Buffer.from(x),data:E}});let s=[];_t(s,r.length);let n=H.Buffer.alloc(Zt);H.Buffer.from(s).copy(n);let a=s.length;r.forEach(A=>{const S=D([ne("programIdIndex"),ye(A.keyIndicesCount.length,"keyIndicesCount"),lt(ne("keyIndex"),A.keyIndices.length,"keyIndices"),ye(A.dataLength.length,"dataLength"),lt(ne("userdatum"),A.data.length,"data")]).encode(A,n,a);a+=S}),n=n.slice(0,a);const l=D([ye(1,"numRequiredSignatures"),ye(1,"numReadonlySignedAccounts"),ye(1,"numReadonlyUnsignedAccounts"),ye(t.length,"keyCount"),lt(ee("key"),e,"keys"),ee("recentBlockhash")]),f={numRequiredSignatures:H.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:H.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:H.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:H.Buffer.from(t),keys:this.accountKeys.map(A=>J(A.toBytes())),recentBlockhash:ut.decode(this.recentBlockhash)};let w=H.Buffer.alloc(2048);const v=l.encode(f,w);return n.copy(w,v),w.slice(0,v+n.length)}static from(e){let t=[...e];const r=Lt(t);if(r!==(r&un))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Lt(t),n=Lt(t),a=wt(t);let l=[];for(let B=0;B<a;B++){const S=kt(t,0,Nt);l.push(new L(H.Buffer.from(S)))}const f=kt(t,0,Nt),w=wt(t);let v=[];for(let B=0;B<w;B++){const S=Lt(t),E=wt(t),R=kt(t,0,E),x=wt(t),P=kt(t,0,x),V=ut.encode(H.Buffer.from(P));v.push({programIdIndex:S,accounts:R,data:V})}const A={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:n},recentBlockhash:ut.encode(H.Buffer.from(f)),accountKeys:l,instructions:v};return new Pt(A)}}class nr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Pr(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,n=this.addressTableLookups.reduce((a,l)=>a+l.writableIndexes.length,0);return s<n}else if(e>=this.header.numRequiredSignatures){const s=e-t,a=r-t-this.header.numReadonlyUnsignedAccounts;return s<a}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(n=>n.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const n of r.writableIndexes)if(n<s.state.addresses.length)t.writable.push(s.state.addresses[n]);else throw new Error(`Failed to find address for index ${n} in address lookup table ${r.accountKey.toBase58()}`);for(const n of r.readonlyIndexes)if(n<s.state.addresses.length)t.readonly.push(s.state.addresses[n]);else throw new Error(`Failed to find address for index ${n} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=ln.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},n=e.addressLookupTableAccounts||[];for(const v of n){const A=t.extractTableLookup(v);if(A!==void 0){const[B,{writable:S,readonly:E}]=A;r.push(B),s.writable.push(...S),s.readonly.push(...E)}}const[a,l]=t.getMessageComponents(),w=new Pr(l,s).compileInstructions(e.instructions);return new nr({header:a,staticAccountKeys:l,recentBlockhash:e.recentBlockhash,compiledInstructions:w,addressTableLookups:r})}serialize(){const e=Array();_t(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();_t(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),n=Array();_t(n,this.addressTableLookups.length);const a=D([ne("prefix"),D([ne("numRequiredSignatures"),ne("numReadonlySignedAccounts"),ne("numReadonlyUnsignedAccounts")],"header"),ye(e.length,"staticAccountKeysLength"),lt(ee(),this.staticAccountKeys.length,"staticAccountKeys"),ee("recentBlockhash"),ye(r.length,"instructionsLength"),ye(t.length,"serializedInstructions"),ye(n.length,"addressTableLookupsLength"),ye(s.length,"serializedAddressTableLookups")]),l=new Uint8Array(Zt),w=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(v=>v.toBytes()),recentBlockhash:ut.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(n),serializedAddressTableLookups:s},l);return l.slice(0,w)}serializeInstructions(){let e=0;const t=new Uint8Array(Zt);for(const r of this.compiledInstructions){const s=Array();_t(s,r.accountKeyIndexes.length);const n=Array();_t(n,r.data.length);const a=D([ne("programIdIndex"),ye(s.length,"encodedAccountKeyIndexesLength"),lt(ne(),r.accountKeyIndexes.length,"accountKeyIndexes"),ye(n.length,"encodedDataLength"),ye(r.data.length,"data")]);e+=a.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(n),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Zt);for(const r of this.addressTableLookups){const s=Array();_t(s,r.writableIndexes.length);const n=Array();_t(n,r.readonlyIndexes.length);const a=D([ee("accountKey"),ye(s.length,"encodedWritableIndexesLength"),lt(ne(),r.writableIndexes.length,"writableIndexes"),ye(n.length,"encodedReadonlyIndexesLength"),lt(ne(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=a.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(n),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Lt(t),s=r&un;se(r!==s,"Expected versioned message but received legacy message");const n=s;se(n===0,`Expected versioned message with version 0 but found version ${n}`);const a={numRequiredSignatures:Lt(t),numReadonlySignedAccounts:Lt(t),numReadonlyUnsignedAccounts:Lt(t)},l=[],f=wt(t);for(let E=0;E<f;E++)l.push(new L(kt(t,0,Nt)));const w=ut.encode(kt(t,0,Nt)),v=wt(t),A=[];for(let E=0;E<v;E++){const R=Lt(t),x=wt(t),P=kt(t,0,x),V=wt(t),F=new Uint8Array(kt(t,0,V));A.push({programIdIndex:R,accountKeyIndexes:P,data:F})}const B=wt(t),S=[];for(let E=0;E<B;E++){const R=new L(kt(t,0,Nt)),x=wt(t),P=kt(t,0,x),V=wt(t),F=kt(t,0,V);S.push({accountKey:R,writableIndexes:P,readonlyIndexes:F})}return new nr({header:a,staticAccountKeys:l,recentBlockhash:w,compiledInstructions:A,addressTableLookups:S})}}const Es={deserializeMessageVersion(i){const e=i[0],t=e&un;return t===e?"legacy":t},deserialize:i=>{const e=Es.deserializeMessageVersion(i);if(e==="legacy")return Pt.from(i);if(e===0)return nr.deserialize(i);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Wt=function(i){return i[i.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",i[i.PROCESSED=1]="PROCESSED",i[i.TIMED_OUT=2]="TIMED_OUT",i[i.NONCE_INVALID=3]="NONCE_INVALID",i}({});const ou=H.Buffer.alloc(Mr).fill(0);class fe{constructor(e){this.keys=void 0,this.programId=void 0,this.data=H.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ae{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new fe(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<t.length;R++)if(t[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const s=[],n=[];t.forEach(R=>{R.keys.forEach(P=>{n.push({...P})});const x=R.programId.toString();s.includes(x)||s.push(x)}),s.forEach(R=>{n.push({pubkey:new L(R),isSigner:!1,isWritable:!1})});const a=[];n.forEach(R=>{const x=R.pubkey.toString(),P=a.findIndex(V=>V.pubkey.toString()===x);P>-1?(a[P].isWritable=a[P].isWritable||R.isWritable,a[P].isSigner=a[P].isSigner||R.isSigner):a.push(R)}),a.sort(function(R,x){if(R.isSigner!==x.isSigner)return R.isSigner?-1:1;if(R.isWritable!==x.isWritable)return R.isWritable?-1:1;const P={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(x.pubkey.toBase58(),"en",P)});const l=a.findIndex(R=>R.pubkey.equals(r));if(l>-1){const[R]=a.splice(l,1);R.isSigner=!0,R.isWritable=!0,a.unshift(R)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const R of this.signatures){const x=a.findIndex(P=>P.pubkey.equals(R.publicKey));if(x>-1)a[x].isSigner||(a[x].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let f=0,w=0,v=0;const A=[],B=[];a.forEach(({pubkey:R,isSigner:x,isWritable:P})=>{x?(A.push(R.toString()),f+=1,P||(w+=1)):(B.push(R.toString()),P||(v+=1))});const S=A.concat(B),E=t.map(R=>{const{data:x,programId:P}=R;return{programIdIndex:S.indexOf(P.toString()),accounts:R.keys.map(V=>S.indexOf(V.pubkey.toString())),data:ut.encode(x)}});return E.forEach(R=>{se(R.programIdIndex>=0),R.accounts.forEach(x=>se(x>=0))}),new Pt({header:{numRequiredSignatures:f,numReadonlySignedAccounts:w,numReadonlyUnsignedAccounts:v},accountKeys:S,recentBlockhash:e,instructions:E})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,n)=>t[n].equals(s.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const s=r.toString();return t.has(s)?!1:(t.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const a=n.publicKey.toString();t.has(a)||(t.add(a),r.push(n))}this.signatures=r.map(n=>({signature:null,publicKey:n.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const a=n.publicKey.toString();t.has(a)||(t.add(a),r.push(n))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(s=>{const n=vs(r,s.secretKey);this._addSignature(s.publicKey,J(n))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){se(t.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=H.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:s,publicKey:n}of this.signatures)s===null?t&&(r.missing||(r.missing=[])).push(n):Zc(s,e,n.toBytes())||(r.invalid||(r.invalid=[])).push(n);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const n=this._getMessageSignednessErrors(s,t);if(n){let a="Signature verification failed.";throw n.invalid&&(a+=`
Invalid signature for public key${n.invalid.length===1?"":"(s)"} [\`${n.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),n.missing&&(a+=`
Missing signature for public key${n.missing.length===1?"":"(s)"} [\`${n.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,r=[];_t(r,t.length);const s=r.length+t.length*64+e.length,n=H.Buffer.alloc(s);return se(t.length<256),H.Buffer.from(r).copy(n,0),t.forEach(({signature:a},l)=>{a!==null&&(se(a.length===64,"signature has invalid length"),H.Buffer.from(a).copy(n,r.length+l*64))}),e.copy(n,r.length+t.length*64),se(n.length<=Zt,`Transaction too large: ${n.length} > ${Zt}`),n}get keys(){return se(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return se(this.instructions.length===1),this.instructions[0].programId}get data(){return se(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=wt(t);let s=[];for(let n=0;n<r;n++){const a=kt(t,0,Mr);s.push(ut.encode(H.Buffer.from(a)))}return ae.populate(Pt.from(t),s)}static populate(e,t=[]){const r=new ae;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((s,n)=>{const a={signature:s==ut.encode(ou)?null:ut.decode(s),publicKey:e.accountKeys[n]};r.signatures.push(a)}),e.instructions.forEach(s=>{const n=s.accounts.map(a=>{const l=e.accountKeys[a];return{pubkey:l,isSigner:r.signatures.some(f=>f.publicKey.toString()===l.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});r.instructions.push(new fe({keys:n,programId:e.accountKeys[s.programIdIndex],data:ut.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}}class As{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:s,recentBlockhash:n}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:f}=r,w=a-l;se(w>0,"Message header is invalid");const v=e.staticAccountKeys.length-a-f;se(v>=0,"Message header is invalid");const A=e.getAccountKeys(t),B=A.get(0);if(B===void 0)throw new Error("Failed to decompile message because no account keys were found");const S=[];for(const E of s){const R=[];for(const P of E.accountKeyIndexes){const V=A.get(P);if(V===void 0)throw new Error(`Failed to find key for account key index ${P}`);const F=P<a;let G;F?G=P<w:P<A.staticAccountKeys.length?G=P-a<v:G=P-A.staticAccountKeys.length<A.accountKeysFromLookups.writable.length,R.push({pubkey:V,isSigner:P<r.numRequiredSignatures,isWritable:G})}const x=A.get(E.programIdIndex);if(x===void 0)throw new Error(`Failed to find program id for program id index ${E.programIdIndex}`);S.push(new fe({programId:x,data:J(E.data),keys:R}))}return new As({payerKey:B,instructions:S,recentBlockhash:n})}compileToLegacyMessage(){return Pt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return nr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class xs{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)se(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(Mr));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();_t(t,this.signatures.length);const r=D([ye(t.length,"encodedSignaturesLength"),lt(tu(),this.signatures.length,"signatures"),ye(e.length,"serializedMessage")]),s=new Uint8Array(2048),n=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,n)}static deserialize(e){let t=[...e];const r=[],s=wt(t);for(let a=0;a<s;a++)r.push(new Uint8Array(kt(t,0,Mr)));const n=Es.deserialize(new Uint8Array(t));return new xs(n,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const n=r.findIndex(a=>a.equals(s.publicKey));se(n>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[n]=vs(t,s.secretKey)}}addSignature(e,t){se(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(n=>n.equals(e));se(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const au=160,cu=64,uu=au/cu,Eo=1e3/uu,Tt=new L("SysvarC1ock11111111111111111111111111111111"),lu=new L("SysvarEpochSchedu1e111111111111111111111111"),hu=new L("Sysvar1nstructions1111111111111111111111111"),Vr=new L("SysvarRecentB1ockHashes11111111111111111111"),br=new L("SysvarRent111111111111111111111111111111111"),fu=new L("SysvarRewards111111111111111111111111111111"),du=new L("SysvarS1otHashes111111111111111111111111111"),pu=new L("SysvarS1otHistory11111111111111111111111111"),$r=new L("SysvarStakeHistory1111111111111111111111111");class Tr extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:s}){const n=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let l;switch(e){case"send":l=`Transaction ${t} resulted in an error. 
${r}. `+n+a;break;case"simulate":l=`Simulation failed. 
Message: ${r}. 
`+n+a;break;default:l=`Unknown action '${(f=>f)(e)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const n=s.meta.logMessages;this.transactionLogs=n,t(n)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const gu={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class q extends Error{constructor({code:e,message:t,data:r},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function es(i,e,t,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},n=await i.sendTransaction(e,t,s);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await i.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:n,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:l}=e.nonceInfo,f=l.keys[0].pubkey;a=(await i.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:n},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await i.confirmTransaction(n,r&&r.commitment)).value;if(a.err)throw n!=null?new Tr({action:"send",signature:n,transactionMessage:`Status: (${JSON.stringify(a)})`}):new Error(`Transaction ${n} failed (${JSON.stringify(a)})`);return n}function er(i){return new Promise(e=>setTimeout(e,i))}function re(i,e){const t=i.layout.span>=0?i.layout.span:_o(i,e),r=H.Buffer.alloc(t),s=Object.assign({instruction:i.index},e);return i.layout.encode(s,r),r}function ce(i,e){let t;try{t=i.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.instruction!==i.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${i.index}`);return t}const Ao=at("lamportsPerSignature"),xo=D([W("version"),W("state"),ee("authorizedPubkey"),ee("nonce"),D([Ao],"feeCalculator")]),ts=xo.span;class hn{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=xo.decode(J(e),0);return new hn({authorizedPubkey:new L(t.authorizedPubkey),nonce:new L(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function wr(i){const e=ye(8,i),t=e.decode.bind(e),r=e.encode.bind(e),s=e,n=Ja();return s.decode=(a,l)=>{const f=t(a,l);return n.decode(f)},s.encode=(a,l,f)=>{const w=n.encode(a);return r(w,l,f)},s}class yu{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=W("instruction").decode(e.data);let s;for(const[n,a]of Object.entries(pe))if(a.index==r){s=n;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:s}=ce(pe.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new L(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=ce(pe.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:s}=ce(pe.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new L(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=ce(pe.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:s,programId:n}=ce(pe.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new L(t),seed:r,space:s,programId:new L(n)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=ce(pe.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new L(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:s}=ce(pe.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new L(t),seed:r,programId:new L(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:s,space:n,programId:a}=ce(pe.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new L(t),seed:r,lamports:s,space:n,programId:new L(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=ce(pe.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new L(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ce(pe.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ce(pe.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=ce(pe.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new L(t)}}static checkProgramId(e){if(!e.equals(it.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const pe=Object.freeze({Create:{index:0,layout:D([W("instruction"),St("lamports"),St("space"),ee("programId")])},Assign:{index:1,layout:D([W("instruction"),ee("programId")])},Transfer:{index:2,layout:D([W("instruction"),wr("lamports")])},CreateWithSeed:{index:3,layout:D([W("instruction"),ee("base"),rr("seed"),St("lamports"),St("space"),ee("programId")])},AdvanceNonceAccount:{index:4,layout:D([W("instruction")])},WithdrawNonceAccount:{index:5,layout:D([W("instruction"),St("lamports")])},InitializeNonceAccount:{index:6,layout:D([W("instruction"),ee("authorized")])},AuthorizeNonceAccount:{index:7,layout:D([W("instruction"),ee("authorized")])},Allocate:{index:8,layout:D([W("instruction"),St("space")])},AllocateWithSeed:{index:9,layout:D([W("instruction"),ee("base"),rr("seed"),St("space"),ee("programId")])},AssignWithSeed:{index:10,layout:D([W("instruction"),ee("base"),rr("seed"),ee("programId")])},TransferWithSeed:{index:11,layout:D([W("instruction"),wr("lamports"),rr("seed"),ee("programId")])},UpgradeNonceAccount:{index:12,layout:D([W("instruction")])}});class it{constructor(){}static createAccount(e){const t=pe.Create,r=re(t,{lamports:e.lamports,space:e.space,programId:J(e.programId.toBuffer())});return new fe({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){const s=pe.TransferWithSeed;t=re(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:J(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=pe.Transfer;t=re(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new fe({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){const s=pe.AssignWithSeed;t=re(s,{base:J(e.basePubkey.toBuffer()),seed:e.seed,programId:J(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=pe.Assign;t=re(s,{programId:J(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new fe({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=pe.CreateWithSeed,r=re(t,{base:J(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:J(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new fe({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const t=new ae;"basePubkey"in e&&"seed"in e?t.add(it.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ts,programId:this.programId})):t.add(it.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ts,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=pe.InitializeNonceAccount,r=re(t,{authorized:J(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Vr,isSigner:!1,isWritable:!1},{pubkey:br,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new fe(s)}static nonceAdvance(e){const t=pe.AdvanceNonceAccount,r=re(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Vr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new fe(s)}static nonceWithdraw(e){const t=pe.WithdrawNonceAccount,r=re(t,{lamports:e.lamports});return new fe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Vr,isSigner:!1,isWritable:!1},{pubkey:br,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const t=pe.AuthorizeNonceAccount,r=re(t,{authorized:J(e.newAuthorizedPubkey.toBuffer())});return new fe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){const s=pe.AllocateWithSeed;t=re(s,{base:J(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:J(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=pe.Allocate;t=re(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new fe({keys:r,programId:this.programId,data:t})}}it.programId=new L("11111111111111111111111111111111");const mu=Zt-300;class sr{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/sr.chunkSize)+1+1)}static async load(e,t,r,s,n){{const A=await e.getMinimumBalanceForRentExemption(n.length),B=await e.getAccountInfo(r.publicKey,"confirmed");let S=null;if(B!==null){if(B.executable)return console.error("Program load failed, account is already executable"),!1;B.data.length!==n.length&&(S=S||new ae,S.add(it.allocate({accountPubkey:r.publicKey,space:n.length}))),B.owner.equals(s)||(S=S||new ae,S.add(it.assign({accountPubkey:r.publicKey,programId:s}))),B.lamports<A&&(S=S||new ae,S.add(it.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:A-B.lamports})))}else S=new ae().add(it.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:A>0?A:1,space:n.length,programId:s}));S!==null&&await es(e,S,[t,r],{commitment:"confirmed"})}const a=D([W("instruction"),W("offset"),W("bytesLength"),W("bytesLengthPadding"),lt(ne("byte"),Yt(W(),-8),"bytes")]),l=sr.chunkSize;let f=0,w=n,v=[];for(;w.length>0;){const A=w.slice(0,l),B=H.Buffer.alloc(l+16);a.encode({instruction:0,offset:f,bytes:A,bytesLength:0,bytesLengthPadding:0},B);const S=new ae().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:B});v.push(es(e,S,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await er(1e3/4),f+=l,w=w.slice(l)}await Promise.all(v);{const A=D([W("instruction")]),B=H.Buffer.alloc(A.span);A.encode({instruction:1},B);const S=new ae().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:br,isSigner:!1,isWritable:!1}],programId:s,data:B}),E="processed",R=await e.sendTransaction(S,[t,r],{preflightCommitment:E}),{context:x,value:P}=await e.confirmTransaction({signature:R,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},E);if(P.err)throw new Error(`Transaction ${R} failed (${JSON.stringify(P)})`);for(;;){try{if(await e.getSlot({commitment:E})>x.slot)break}catch{}await new Promise(V=>setTimeout(V,Math.round(Eo/2)))}}return!0}}sr.chunkSize=mu;const bu=new L("BPFLoader2111111111111111111111111111111111");class wu{static getMinNumSignatures(e){return sr.getMinNumSignatures(e)}static load(e,t,r,s,n){return sr.load(e,t,r,n,s)}}function ku(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Vn,li;function vu(){if(li)return Vn;li=1;var i=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var n in r)s.push(n);return s};function t(r,s){var n,a,l,f,w,v,A;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),s);if(A=i.call(r),A==="[object Array]"){for(l="[",a=r.length-1,n=0;n<a;n++)l+=t(r[n],!0)+",";return a>-1&&(l+=t(r[n],!0)),l+"]"}else if(A==="[object Object]"){for(f=e(r).sort(),a=f.length,l="",n=0;n<a;)w=f[n],v=t(r[w],!1),v!==void 0&&(l&&(l+=","),l+=JSON.stringify(w)+":"+v),n++;return"{"+l+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Vn=function(r){var s=t(r,!1);if(s!==void 0)return""+s},Vn}var Su=vu(),hi=ku(Su);const xr=32;function $n(i){let e=0;for(;i>1;)i/=2,e++;return e}function _u(i){return i===0?1:(i--,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i|=i>>16,i|=i>>32,i+1)}class Ro{constructor(e,t,r,s,n){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=n}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=$n(_u(e+xr+1))-$n(xr)-1,r=this.getSlotsInEpoch(t),s=e-(r-xr);return[t,s]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+r,n=t%this.slotsPerEpoch;return[s,n]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*xr:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+$n(xr)):this.slotsPerEpoch}}var Iu=globalThis.fetch;class Eu extends Oc{constructor(e,t,r){const s=n=>{const a=Lc(n,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(s,e,t,r),this.underlyingSocket=void 0}call(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function Au(i,e){let t;try{t=i.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==i.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${i.index}`);return t}const fi=56;class rs{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Au(xu,e),r=e.length-fi;se(r>=0,"lookup table is invalid"),se(r%32===0,"lookup table is invalid");const s=r/32,{addresses:n}=D([lt(ee(),s,"addresses")]).decode(e.slice(fi));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new L(t.authority[0]):void 0,addresses:n.map(a=>new L(a))}}}const xu={index:1,layout:D([W("typeIndex"),wr("deactivationSlot"),at("lastExtendedSlot"),ne("lastExtendedStartIndex"),ne(),lt(ee(),Yt(ne(),-1),"authority")])},Ru=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Bu(i){const e=i.match(Ru);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${i}\``);const[t,r,s,n]=e,a=i.startsWith("https:")?"wss:":"ws:",l=s==null?null:parseInt(s.slice(1),10),f=l==null?"":`:${l+1}`;return`${a}//${r}${f}${n}`}const ke=Nr(ms(L),T(),i=>new L(i)),Bo=bs([T(),we("base64")]),Rs=Nr(ms(H.Buffer),Bo,i=>H.Buffer.from(i[0],"base64")),Mo=30*1e3;function Mu(i){if(/^https?:/.test(i)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return i}function de(i){let e,t;if(typeof i=="string")e=i;else if(i){const{commitment:r,...s}=i;e=r,t=s}return{commitment:e,config:t}}function di(i){return i.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Po(i){return mt([M({jsonrpc:we("2.0"),id:T(),result:i}),M({jsonrpc:we("2.0"),id:T(),error:M({code:_r(),message:T(),data:$(nc())})})])}const Pu=Po(_r());function Z(i){return Nr(Po(i),Pu,e=>"error"in e?e:{...e,result:O(e.result,i)})}function ve(i){return Z(M({context:M({slot:_()}),value:i}))}function fn(i){return M({context:M({slot:_()}),value:i})}function Hn(i,e){return i===0?new nr({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new L(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ut.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Pt(e)}const Tu=M({foundation:_(),foundationTerm:_(),initial:_(),taper:_(),terminal:_()}),Lu=Z(N(z(M({epoch:_(),effectiveSlot:_(),amount:_(),postBalance:_(),commission:$(z(_()))})))),Cu=N(M({slot:_(),prioritizationFee:_()})),Ou=M({total:_(),validator:_(),foundation:_(),epoch:_()}),Nu=M({epoch:_(),slotIndex:_(),slotsInEpoch:_(),absoluteSlot:_(),blockHeight:$(_()),transactionCount:$(_())}),zu=M({slotsPerEpoch:_(),leaderScheduleSlotOffset:_(),warmup:zt(),firstNormalEpoch:_(),firstNormalSlot:_()}),Uu=uo(T(),N(_())),ar=z(mt([M({}),T()])),Ku=M({err:ar}),Fu=we("receivedSignature"),Wu=M({"solana-core":T(),"feature-set":$(_())}),Du=M({program:T(),programId:ke,parsed:_r()}),qu=M({programId:ke,accounts:N(ke),data:T()}),pi=ve(M({err:z(mt([M({}),T()])),logs:z(N(T())),accounts:$(z(N(z(M({executable:zt(),owner:T(),lamports:_(),data:N(T()),rentEpoch:$(_())}))))),unitsConsumed:$(_()),returnData:$(z(M({programId:T(),data:bs([T(),we("base64")])}))),innerInstructions:$(z(N(M({index:_(),instructions:N(mt([Du,qu]))}))))})),Vu=ve(M({byIdentity:uo(T(),N(_())),range:M({firstSlot:_(),lastSlot:_()})}));function $u(i,e,t,r,s,n){const a=t||Iu;let l;n!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return r&&(f=async(v,A)=>{const B=await new Promise((S,E)=>{try{r(v,A,(R,x)=>S([R,x]))}catch(R){E(R)}});return await a(...B)}),new Mc(async(v,A)=>{const B={method:"POST",body:v,agent:l,headers:Object.assign({"Content-Type":"application/json"},e||{},$l)};try{let S=5,E,R=500;for(;f?E=await f(i,B):E=await a(i,B),!(E.status!==429||s===!0||(S-=1,S===0));)console.error(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${R}ms delay...`),await er(R),R*=2;const x=await E.text();E.ok?A(null,x):A(new Error(`${E.status} ${E.statusText}: ${x}`))}catch(S){S instanceof Error&&A(S)}},{})}function Hu(i){return(e,t)=>new Promise((r,s)=>{i.request(e,t,(n,a)=>{if(n){s(n);return}r(a)})})}function ju(i){return e=>new Promise((t,r)=>{e.length===0&&t([]);const s=e.map(n=>i.request(n.methodName,n.args));i.request(s,(n,a)=>{if(n){r(n);return}t(a)})})}const Gu=Z(Tu),Yu=Z(Ou),Zu=Z(Cu),Ju=Z(Nu),Xu=Z(zu),Qu=Z(Uu),el=Z(_()),tl=ve(M({total:_(),circulating:_(),nonCirculating:_(),nonCirculatingAccounts:N(ke)})),ns=M({amount:T(),uiAmount:z(_()),decimals:_(),uiAmountString:$(T())}),rl=ve(N(M({address:ke,amount:T(),uiAmount:z(_()),decimals:_(),uiAmountString:$(T())}))),nl=ve(N(M({pubkey:ke,account:M({executable:zt(),owner:ke,lamports:_(),data:Rs,rentEpoch:_()})}))),ss=M({program:T(),parsed:_r(),space:_()}),sl=ve(N(M({pubkey:ke,account:M({executable:zt(),owner:ke,lamports:_(),data:ss,rentEpoch:_()})}))),il=ve(N(M({lamports:_(),address:ke}))),Lr=M({executable:zt(),owner:ke,lamports:_(),data:Rs,rentEpoch:_()}),ol=M({pubkey:ke,account:Lr}),al=Nr(mt([ms(H.Buffer),ss]),mt([Bo,ss]),i=>Array.isArray(i)?O(i,Rs):i),is=M({executable:zt(),owner:ke,lamports:_(),data:al,rentEpoch:_()}),cl=M({pubkey:ke,account:is}),ul=M({state:mt([we("active"),we("inactive"),we("activating"),we("deactivating")]),active:_(),inactive:_()}),ll=Z(N(M({signature:T(),slot:_(),err:ar,memo:z(T()),blockTime:$(z(_()))}))),hl=Z(N(M({signature:T(),slot:_(),err:ar,memo:z(T()),blockTime:$(z(_()))}))),fl=M({subscription:_(),result:fn(Lr)}),dl=M({pubkey:ke,account:Lr}),pl=M({subscription:_(),result:fn(dl)}),gl=M({parent:_(),slot:_(),root:_()}),yl=M({subscription:_(),result:gl}),ml=mt([M({type:mt([we("firstShredReceived"),we("completed"),we("optimisticConfirmation"),we("root")]),slot:_(),timestamp:_()}),M({type:we("createdBank"),parent:_(),slot:_(),timestamp:_()}),M({type:we("frozen"),slot:_(),timestamp:_(),stats:M({numTransactionEntries:_(),numSuccessfulTransactions:_(),numFailedTransactions:_(),maxTransactionsPerEntry:_()})}),M({type:we("dead"),slot:_(),timestamp:_(),err:T()})]),bl=M({subscription:_(),result:ml}),wl=M({subscription:_(),result:fn(mt([Ku,Fu]))}),kl=M({subscription:_(),result:_()}),vl=M({pubkey:T(),gossip:z(T()),tpu:z(T()),rpc:z(T()),version:z(T())}),gi=M({votePubkey:T(),nodePubkey:T(),activatedStake:_(),epochVoteAccount:zt(),epochCredits:N(bs([_(),_(),_()])),commission:_(),lastVote:_(),rootSlot:z(_())}),Sl=Z(M({current:N(gi),delinquent:N(gi)})),_l=mt([we("processed"),we("confirmed"),we("finalized")]),Il=M({slot:_(),confirmations:z(_()),err:ar,confirmationStatus:$(_l)}),El=ve(N(z(Il))),Al=Z(_()),To=M({accountKey:ke,writableIndexes:N(_()),readonlyIndexes:N(_())}),Bs=M({signatures:N(T()),message:M({accountKeys:N(T()),header:M({numRequiredSignatures:_(),numReadonlySignedAccounts:_(),numReadonlyUnsignedAccounts:_()}),instructions:N(M({accounts:N(_()),data:T(),programIdIndex:_()})),recentBlockhash:T(),addressTableLookups:$(N(To))})}),Lo=M({pubkey:ke,signer:zt(),writable:zt(),source:$(mt([we("transaction"),we("lookupTable")]))}),Co=M({accountKeys:N(Lo),signatures:N(T())}),Oo=M({parsed:_r(),program:T(),programId:ke}),No=M({accounts:N(ke),data:T(),programId:ke}),xl=mt([No,Oo]),Rl=mt([M({parsed:_r(),program:T(),programId:T()}),M({accounts:N(T()),data:T(),programId:T()})]),zo=Nr(xl,Rl,i=>"accounts"in i?O(i,No):O(i,Oo)),Uo=M({signatures:N(T()),message:M({accountKeys:N(Lo),instructions:N(zo),recentBlockhash:T(),addressTableLookups:$(z(N(To)))})}),en=M({accountIndex:_(),mint:T(),owner:$(T()),programId:$(T()),uiTokenAmount:ns}),Ko=M({writable:N(ke),readonly:N(ke)}),dn=M({err:ar,fee:_(),innerInstructions:$(z(N(M({index:_(),instructions:N(M({accounts:N(_()),data:T(),programIdIndex:_()}))})))),preBalances:N(_()),postBalances:N(_()),logMessages:$(z(N(T()))),preTokenBalances:$(z(N(en))),postTokenBalances:$(z(N(en))),loadedAddresses:$(Ko),computeUnitsConsumed:$(_()),costUnits:$(_())}),Ms=M({err:ar,fee:_(),innerInstructions:$(z(N(M({index:_(),instructions:N(zo)})))),preBalances:N(_()),postBalances:N(_()),logMessages:$(z(N(T()))),preTokenBalances:$(z(N(en))),postTokenBalances:$(z(N(en))),loadedAddresses:$(Ko),computeUnitsConsumed:$(_()),costUnits:$(_())}),Ir=mt([we(0),we("legacy")]),cr=M({pubkey:T(),lamports:_(),postBalance:z(_()),rewardType:z(T()),commission:$(z(_()))}),Bl=Z(z(M({blockhash:T(),previousBlockhash:T(),parentSlot:_(),transactions:N(M({transaction:Bs,meta:z(dn),version:$(Ir)})),rewards:$(N(cr)),blockTime:z(_()),blockHeight:z(_())}))),Ml=Z(z(M({blockhash:T(),previousBlockhash:T(),parentSlot:_(),rewards:$(N(cr)),blockTime:z(_()),blockHeight:z(_())}))),Pl=Z(z(M({blockhash:T(),previousBlockhash:T(),parentSlot:_(),transactions:N(M({transaction:Co,meta:z(dn),version:$(Ir)})),rewards:$(N(cr)),blockTime:z(_()),blockHeight:z(_())}))),Tl=Z(z(M({blockhash:T(),previousBlockhash:T(),parentSlot:_(),transactions:N(M({transaction:Uo,meta:z(Ms),version:$(Ir)})),rewards:$(N(cr)),blockTime:z(_()),blockHeight:z(_())}))),Ll=Z(z(M({blockhash:T(),previousBlockhash:T(),parentSlot:_(),transactions:N(M({transaction:Co,meta:z(Ms),version:$(Ir)})),rewards:$(N(cr)),blockTime:z(_()),blockHeight:z(_())}))),Cl=Z(z(M({blockhash:T(),previousBlockhash:T(),parentSlot:_(),rewards:$(N(cr)),blockTime:z(_()),blockHeight:z(_())}))),Ol=Z(z(M({blockhash:T(),previousBlockhash:T(),parentSlot:_(),transactions:N(M({transaction:Bs,meta:z(dn)})),rewards:$(N(cr)),blockTime:z(_())}))),yi=Z(z(M({blockhash:T(),previousBlockhash:T(),parentSlot:_(),signatures:N(T()),blockTime:z(_())}))),jn=Z(z(M({slot:_(),meta:z(dn),blockTime:$(z(_())),transaction:Bs,version:$(Ir)}))),Dr=Z(z(M({slot:_(),transaction:Uo,meta:z(Ms),blockTime:$(z(_())),version:$(Ir)}))),Nl=ve(M({blockhash:T(),lastValidBlockHeight:_()})),zl=ve(zt()),Ul=M({slot:_(),numTransactions:_(),numSlots:_(),samplePeriodSecs:_()}),Kl=Z(N(Ul)),Fl=ve(z(M({feeCalculator:M({lamportsPerSignature:_()})}))),Wl=Z(T()),Dl=Z(T()),ql=M({err:ar,logs:N(T()),signature:T()}),Vl=M({result:fn(ql),subscription:_()}),$l={"solana-client":"js/1.0.0-maintenance"};class Hl{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const w={};return async v=>{const{commitment:A,config:B}=de(v),S=this._buildArgs([],A,void 0,B),E=hi(S);return w[E]=w[E]??(async()=>{try{const R=await this._rpcRequest("getBlockHeight",S),x=O(R,Z(_()));if("error"in x)throw new q(x.error,"failed to get block height information");return x.result}finally{delete w[E]}})(),await w[E]}})();let r,s,n,a,l,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,s=t.httpHeaders,n=t.fetch,a=t.fetchMiddleware,l=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=Mu(e),this._rpcWsEndpoint=r||Bu(e),this._rpcClient=$u(e,s,n,a,l,f),this._rpcRequest=Hu(this._rpcClient),this._rpcBatchRequest=ju(this._rpcClient),this._rpcWebSocket=new Eu(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgs([e.toBase58()],r,void 0,s),a=await this._rpcRequest("getBalance",n),l=O(a,ve(_()));if("error"in l)throw new q(l.error,`failed to get balance for ${e.toBase58()}`);return l.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=O(t,Z(z(_())));if("error"in r)throw new q(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=O(e,Z(_()));if("error"in t)throw new q(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=O(e,el);if("error"in t)throw new q(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),s=O(r,tl);if("error"in s)throw new q(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",r),n=O(s,ve(ns));if("error"in n)throw new q(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",r),n=O(s,ve(ns));if("error"in n)throw new q(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){const{commitment:s,config:n}=de(r);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const l=this._buildArgs(a,s,"base64",n),f=await this._rpcRequest("getTokenAccountsByOwner",l),w=O(f,nl);if("error"in w)throw new q(w.error,`failed to get token accounts owned by account ${e.toBase58()}`);return w.result}async getParsedTokenAccountsByOwner(e,t,r){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const n=this._buildArgs(s,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",n),l=O(a,sl);if("error"in l)throw new q(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",r),n=O(s,il);if("error"in n)throw new q(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",r),n=O(s,rl);if("error"in n)throw new q(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgs([e.toBase58()],r,"base64",s),a=await this._rpcRequest("getAccountInfo",n),l=O(a,ve(z(Lr)));if("error"in l)throw new q(l.error,`failed to get info about account ${e.toBase58()}`);return l.result}async getParsedAccountInfo(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgs([e.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getAccountInfo",n),l=O(a,ve(z(is)));if("error"in l)throw new q(l.error,`failed to get info about account ${e.toBase58()}`);return l.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:s}=de(t),n=e.map(w=>w.toBase58()),a=this._buildArgs([n],r,"jsonParsed",s),l=await this._rpcRequest("getMultipleAccounts",a),f=O(l,ve(N(z(is))));if("error"in f)throw new q(f.error,`failed to get info for accounts ${n}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:s}=de(t),n=e.map(w=>w.toBase58()),a=this._buildArgs([n],r,"base64",s),l=await this._rpcRequest("getMultipleAccounts",a),f=O(l,ve(N(z(Lr))));if("error"in f)throw new q(f.error,`failed to get info for accounts ${n}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:s,config:n}=de(t),a=this._buildArgs([e.toBase58()],s,void 0,{...n,epoch:r??(n==null?void 0:n.epoch)}),l=await this._rpcRequest("getStakeActivation",a),f=O(l,Z(ul));if("error"in f)throw new q(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:r,config:s}=de(t),{encoding:n,...a}=s||{},l=this._buildArgs([e.toBase58()],r,n||"base64",{...a,...a.filters?{filters:di(a.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",l),w=N(ol),v=a.withContext===!0?O(f,ve(w)):O(f,Z(w));if("error"in v)throw new q(v.error,`failed to get accounts owned by program ${e.toBase58()}`);return v.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgs([e.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getProgramAccounts",n),l=O(a,Z(N(cl)));if("error"in l)throw new q(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async confirmTransaction(e,t){var n;let r;if(typeof e=="string")r=e;else{const a=e;if((n=a.abortSignal)!=null&&n.aborted)return Promise.reject(a.abortSignal.reason);r=a.signature}let s;try{s=ut.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return se(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,s,n=!1;const a=new Promise((f,w)=>{try{r=this.onSignature(t,(A,B)=>{r=void 0;const S={context:B,value:A};f({__type:Wt.PROCESSED,response:S})},e);const v=new Promise(A=>{r==null?A():s=this._onSubscriptionStateChange(r,B=>{B==="subscribed"&&A()})});(async()=>{if(await v,n)return;const A=await this.getSignatureStatus(t);if(n||A==null)return;const{context:B,value:S}=A;if(S!=null)if(S!=null&&S.err)w(S.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}n=!0,f({__type:Wt.PROCESSED,response:{context:B,value:S}})}})()}catch(v){w(v)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:s}}){let n=!1;const a=new Promise(A=>{const B=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let S=await B();if(!n){for(;S<=r;)if(await er(1e3),n||(S=await B(),n))return;A({__type:Wt.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),w=this.getCancellationPromise(t);let v;try{const A=await Promise.race([w,f,a]);if(A.__type===Wt.PROCESSED)v=A.response;else throw new _s(s)}finally{n=!0,l()}return v}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:s,nonceValue:n,signature:a}}){let l=!1;const f=new Promise(S=>{let E=n,R=null;const x=async()=>{try{const{context:P,value:V}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return R=P.slot,V==null?void 0:V.nonce}catch{return E}};(async()=>{if(E=await x(),!l)for(;;){if(n!==E){S({__type:Wt.NONCE_INVALID,slotInWhichNonceDidAdvance:R});return}if(await er(2e3),l||(E=await x(),l))return}})()}),{abortConfirmation:w,confirmationPromise:v}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),A=this.getCancellationPromise(t);let B;try{const S=await Promise.race([A,v,f]);if(S.__type===Wt.PROCESSED)B=S.response;else{let E;for(;;){const R=await this.getSignatureStatus(a);if(R==null)break;if(R.context.slot<(S.slotInWhichNonceDidAdvance??r)){await er(400);continue}E=R;break}if(E!=null&&E.value){const R=e||"finalized",{confirmationStatus:x}=E.value;switch(R){case"processed":case"recent":if(x!=="processed"&&x!=="confirmed"&&x!=="finalized")throw new fr(a);break;case"confirmed":case"single":case"singleGossip":if(x!=="confirmed"&&x!=="finalized")throw new fr(a);break;case"finalized":case"max":case"root":if(x!=="finalized")throw new fr(a);break;default:}B={context:E.context,value:{err:E.value.err}}}else throw new fr(a)}}finally{l=!0,w()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const s=new Promise(f=>{let w=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{w=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>f({__type:Wt.TIMED_OUT,timeoutMs:w}),w)}),{abortConfirmation:n,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let l;try{const f=await Promise.race([a,s]);if(f.__type===Wt.PROCESSED)l=f.response;else throw new Is(t,f.timeoutMs/1e3)}finally{clearTimeout(r),n()}return l}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=O(e,Z(N(vl)));if("error"in t)throw new q(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),s=O(r,Sl);if("error"in s)throw new q(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),n=await this._rpcRequest("getSlot",s),a=O(n,Z(_()));if("error"in a)throw new q(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),n=await this._rpcRequest("getSlotLeader",s),a=O(n,Z(T()));if("error"in a)throw new q(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const r=[e,t],s=await this._rpcRequest("getSlotLeaders",r),n=O(s,Z(N(ke)));if("error"in n)throw new q(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(e,t){const{context:r,value:s}=await this.getSignatureStatuses([e],t);se(s.length===1);const n=s[0];return{context:r,value:n}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const s=await this._rpcRequest("getSignatureStatuses",r),n=O(s,El);if("error"in n)throw new q(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),n=await this._rpcRequest("getTransactionCount",s),a=O(n,Z(_()));if("error"in a)throw new q(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),s=O(r,Gu);if("error"in s)throw new q(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,r){const{commitment:s,config:n}=de(r),a=this._buildArgs([e.map(w=>w.toBase58())],s,void 0,{...n,epoch:t??(n==null?void 0:n.epoch)}),l=await this._rpcRequest("getInflationReward",a),f=O(l,Lu);if("error"in f)throw new q(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=O(e,Yu);if("error"in t)throw new q(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),n=await this._rpcRequest("getEpochInfo",s),a=O(n,Ju);if("error"in a)throw new q(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=O(e,Xu);if("error"in t)throw new q(t.error,"failed to get epoch schedule");const r=t.result;return new Ro(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=O(e,Qu);if("error"in t)throw new q(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),n=O(s,Al);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=O(t,Kl);if("error"in r)throw new q(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),n=O(s,Fl);if("error"in n)throw new q(n.error,"failed to get fee calculator");const{context:a,value:l}=n.result;return{context:a,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(e,t){const r=J(e.serialize()).toString("base64"),s=this._buildArgs([r],t),n=await this._rpcRequest("getFeeForMessage",s),a=O(n,ve(z(_())));if("error"in a)throw new q(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){var a;const t=(a=e==null?void 0:e.lockedWritableAccounts)==null?void 0:a.map(l=>l.toBase58()),r=t!=null&&t.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),n=O(s,Zu);if("error"in n)throw new q(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,void 0,r),n=await this._rpcRequest("getLatestBlockhash",s),a=O(n,Nl);if("error"in a)throw new q(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgs([e],r,void 0,s),a=await this._rpcRequest("isBlockhashValid",n),l=O(a,zl);if("error"in l)throw new q(l.error,"failed to determine if the blockhash `"+e+"`is valid");return l.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=O(e,Z(Wu));if("error"in t)throw new q(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=O(e,Z(T()));if("error"in t)throw new q(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgsAtLeastConfirmed([e],r,void 0,s),a=await this._rpcRequest("getBlock",n);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const l=O(a,Pl);if("error"in l)throw l.error;return l.result}case"none":{const l=O(a,Ml);if("error"in l)throw l.error;return l.result}default:{const l=O(a,Bl);if("error"in l)throw l.error;const{result:f}=l;return f?{...f,transactions:f.transactions.map(({transaction:w,meta:v,version:A})=>({meta:v,transaction:{...w,message:Hn(A,w.message)},version:A}))}:null}}}catch(l){throw new q(l,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),a=await this._rpcRequest("getBlock",n);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const l=O(a,Ll);if("error"in l)throw l.error;return l.result}case"none":{const l=O(a,Cl);if("error"in l)throw l.error;return l.result}default:{const l=O(a,Tl);if("error"in l)throw l.error;return l.result}}}catch(l){throw new q(l,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:l,...f}=e;r=l,t=f}const s=this._buildArgs([],r,"base64",t),n=await this._rpcRequest("getBlockProduction",s),a=O(n,Vu);if("error"in a)throw new q(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgsAtLeastConfirmed([e],r,void 0,s),a=await this._rpcRequest("getTransaction",n),l=O(a,jn);if("error"in l)throw new q(l.error,"failed to get transaction");const f=l.result;return f&&{...f,transaction:{...f.transaction,message:Hn(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:s}=de(t),n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),a=await this._rpcRequest("getTransaction",n),l=O(a,Dr);if("error"in l)throw new q(l.error,"failed to get transaction");return l.result}async getParsedTransactions(e,t){const{commitment:r,config:s}=de(t),n=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(n)).map(f=>{const w=O(f,Dr);if("error"in w)throw new q(w.error,"failed to get transactions");return w.result})}async getTransactions(e,t){const{commitment:r,config:s}=de(t),n=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,void 0,s)}));return(await this._rpcBatchRequest(n)).map(f=>{const w=O(f,jn);if("error"in w)throw new q(w.error,"failed to get transactions");const v=w.result;return v&&{...v,transaction:{...v.transaction,message:Hn(v.version,v.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",r),n=O(s,Ol);if("error"in n)throw new q(n.error,"failed to get confirmed block");const a=n.result;if(!a)throw new Error("Confirmed block "+e+" not found");const l={...a,transactions:a.transactions.map(({transaction:f,meta:w})=>{const v=new Pt(f.message);return{meta:w,transaction:{...f,message:v}}})};return{...l,transactions:l.transactions.map(({transaction:f,meta:w})=>({meta:w,transaction:ae.populate(f.message,f.signatures)}))}}async getBlocks(e,t,r){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),n=await this._rpcRequest("getBlocks",s),a=O(n,Z(N(_())));if("error"in a)throw new q(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),n=O(s,yi);if("error"in n)throw new q(n.error,"failed to get block");const a=n.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),n=O(s,yi);if("error"in n)throw new q(n.error,"failed to get confirmed block");const a=n.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",r),n=O(s,jn);if("error"in n)throw new q(n.error,"failed to get transaction");const a=n.result;if(!a)return a;const l=new Pt(a.transaction.message),f=a.transaction.signatures;return{...a,transaction:ae.populate(l,f)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),n=O(s,Dr);if("error"in n)throw new q(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){const r=e.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(a=>{const l=O(a,Dr);if("error"in l)throw new q(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(e,t,r){let s={},n=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<n));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(s.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let a=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>a));)try{const f=await this.getConfirmedBlockSignatures(r);f.signatures.length>0&&(s.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),n=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),a=O(n,ll);if("error"in a)throw new q(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),n=await this._rpcRequest("getSignaturesForAddress",s),a=O(n,hl);if("error"in a)throw new q(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let n=null;return s!==null&&(n=new rs({key:e,state:rs.deserialize(s.data)})),{context:r,value:n}}async getNonceAndContext(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let n=null;return s!==null&&(n=hn.fromAccountData(s.data)),{context:r,value:n}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=O(r,Wl);if("error"in s)throw new q(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await er(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Mo;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let s=0;s<50;s++){const n=await this.getLatestBlockhash("finalized");if(r!==n.blockhash)return this._blockhashInfo={latestBlockhash:n,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},n;await er(Eo/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=de(e),s=this._buildArgs([],t,"base64",r),n=await this._rpcRequest("getStakeMinimumDelegation",s),a=O(n,ve(_()));if("error"in a)throw new q(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,r){if("message"in e){const R=e.serialize(),x=H.Buffer.from(R).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const P=t||{};P.encoding="base64","commitment"in P||(P.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(P.innerInstructions=t.innerInstructions);const V=[x,P],F=await this._rpcRequest("simulateTransaction",V),G=O(F,pi);if("error"in G)throw new Error("failed to simulate transaction: "+G.error.message);return G.result}let s;if(e instanceof ae){let E=e;s=new ae,s.feePayer=E.feePayer,s.instructions=e.instructions,s.nonceInfo=E.nonceInfo,s.signatures=E.signatures}else s=ae.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(s.nonceInfo&&n)s.sign(...n);else{let E=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(E);if(s.lastValidBlockHeight=R.lastValidBlockHeight,s.recentBlockhash=R.blockhash,!n)break;if(s.sign(...n),!s.signature)throw new Error("!signature");const x=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(x)&&!this._blockhashInfo.transactionSignatures.includes(x)){this._blockhashInfo.simulatedSignatures.push(x);break}else E=!0}}const a=s._compile(),l=a.serialize(),w=s._serialize(l).toString("base64"),v={encoding:"base64",commitment:this.commitment};if(r){const E=(Array.isArray(r)?r:a.nonProgramIds()).map(R=>R.toBase58());v.accounts={encoding:"base64",addresses:E}}n&&(v.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(v.innerInstructions=t.innerInstructions);const A=[w,v],B=await this._rpcRequest("simulateTransaction",A),S=O(B,pi);if("error"in S){let E;if("data"in S.error&&(E=S.error.data.logs,E&&Array.isArray(E))){const R=`
    `,x=R+E.join(R);console.error(S.error.message,x)}throw new Tr({action:"simulate",signature:"",transactionMessage:S.error.message,logs:E})}return S.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let a=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=l.lastValidBlockHeight,e.recentBlockhash=l.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))a=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const n=e.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(e,t){const r=J(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},s=t&&t.skipPreflight,n=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),s&&(r.skipPreflight=s),n&&(r.preflightCommitment=n);const a=[e,r],l=await this._rpcRequest("sendTransaction",a),f=O(l,Dl);if("error"in f){let w;throw"data"in f.error&&(w=f.error.data.logs),new Tr({action:s?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:w})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const n=this._subscriptionStateChangeCallbacksByHash[e];n&&n.forEach(a=>{try{a(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var n;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=(n=this._subscriptionStateChangeCallbacksByHash)[r]||(n[r]=new Set);return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:n,method:a}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const l=await this._rpcWebSocket.call(a,n);this._setSubscription(r,{...s,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=s.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:n,error:l}),!t())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:a}=s;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[n])}catch(l){if(l instanceof Error&&console.error(`${a} error:`,l.message),!t())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...t)}catch(n){console.error(n)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=O(e,fl);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,s=hi([e.method,t]),n=this._subscriptionsByHash[s];return n===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:n.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const a=this._subscriptionsByHash[s];se(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:s,config:n}=de(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",n);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=O(e,pl);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,s){const{commitment:n,config:a}=de(r),l=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",a||(s?{filters:di(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=O(e,Vl);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=O(e,yl);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=O(e,bl);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,s){const n=t||this._commitment;if(n||r||s){let a={};r&&(a.encoding=r),n&&(a.commitment=n),s&&(a=Object.assign(a,s)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,r,s){const n=t||this._commitment;if(n&&!["confirmed","finalized"].includes(n))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,s)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=O(e,wl);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),n=this._makeSubscription({callback:(a,l)=>{if(a.type==="status"){t(a.result,l);try{this.removeSignatureListener(n)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return n}onSignatureWithOptions(e,t,r){const{commitment:s,...n}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([e],s,void 0,n),l=this._makeSubscription({callback:(f,w)=>{t(f,w);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return l}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=O(e,kl);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class gr{constructor(e){this._keypair=void 0,this._keypair=e??ai()}static generate(){return new gr(ai())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),n=Qr(s);for(let a=0;a<32;a++)if(r[a]!==n[a])throw new Error("provided secretKey is invalid")}return new gr({publicKey:r,secretKey:e})}static fromSeed(e){const t=Qr(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new gr({publicKey:t,secretKey:r})}get publicKey(){return new L(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Vt=Object.freeze({CreateLookupTable:{index:0,layout:D([W("instruction"),wr("recentSlot"),ne("bumpSeed")])},FreezeLookupTable:{index:1,layout:D([W("instruction")])},ExtendLookupTable:{index:2,layout:D([W("instruction"),wr(),lt(ee(),Yt(W(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:D([W("instruction")])},CloseLookupTable:{index:4,layout:D([W("instruction")])}});class jl{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=W("instruction").decode(e.data);let s;for(const[n,a]of Object.entries(Vt))if(a.index==r){s=n;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=ce(Vt.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=ce(Vt.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(r=>new L(r))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Ps.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Ps{constructor(){}static createLookupTable(e){const[t,r]=L.findProgramAddressSync([e.authority.toBuffer(),oo().encode(e.recentSlot)],this.programId),s=Vt.CreateLookupTable,n=re(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:it.programId,isSigner:!1,isWritable:!1}];return[new fe({programId:this.programId,keys:a,data:n}),t]}static freezeLookupTable(e){const t=Vt.FreezeLookupTable,r=re(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new fe({programId:this.programId,keys:s,data:r})}static extendLookupTable(e){const t=Vt.ExtendLookupTable,r=re(t,{addresses:e.addresses.map(n=>n.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:it.programId,isSigner:!1,isWritable:!1}),new fe({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(e){const t=Vt.DeactivateLookupTable,r=re(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new fe({programId:this.programId,keys:s,data:r})}static closeLookupTable(e){const t=Vt.CloseLookupTable,r=re(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new fe({programId:this.programId,keys:s,data:r})}}Ps.programId=new L("AddressLookupTab1e1111111111111111111111111");class Gl{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=ne("instruction").decode(e.data);let s;for(const[n,a]of Object.entries(Ct))if(a.index==r){s=n;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=ce(Ct.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=ce(Ct.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=ce(Ct.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=ce(Ct.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Ts.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Ct=Object.freeze({RequestUnits:{index:0,layout:D([ne("instruction"),W("units"),W("additionalFee")])},RequestHeapFrame:{index:1,layout:D([ne("instruction"),W("bytes")])},SetComputeUnitLimit:{index:2,layout:D([ne("instruction"),W("units")])},SetComputeUnitPrice:{index:3,layout:D([ne("instruction"),wr("microLamports")])}});class Ts{constructor(){}static requestUnits(e){const t=Ct.RequestUnits,r=re(t,e);return new fe({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const t=Ct.RequestHeapFrame,r=re(t,e);return new fe({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const t=Ct.SetComputeUnitLimit,r=re(t,e);return new fe({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const t=Ct.SetComputeUnitPrice,r=re(t,{microLamports:BigInt(e.microLamports)});return new fe({keys:[],programId:this.programId,data:r})}}Ts.programId=new L("ComputeBudget111111111111111111111111111111");const mi=64,bi=32,wi=64,ki=D([ne("numSignatures"),ne("padding"),At("signatureOffset"),At("signatureInstructionIndex"),At("publicKeyOffset"),At("publicKeyInstructionIndex"),At("messageDataOffset"),At("messageDataSize"),At("messageInstructionIndex")]);class pn{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:s,instructionIndex:n}=e;se(t.length===bi,`Public Key must be ${bi} bytes but received ${t.length} bytes`),se(s.length===wi,`Signature must be ${wi} bytes but received ${s.length} bytes`);const a=ki.span,l=a+t.length,f=l+s.length,w=1,v=H.Buffer.alloc(f+r.length),A=n??65535;return ki.encode({numSignatures:w,padding:0,signatureOffset:l,signatureInstructionIndex:A,publicKeyOffset:a,publicKeyInstructionIndex:A,messageDataOffset:f,messageDataSize:r.length,messageInstructionIndex:A},v),v.fill(t,a),v.fill(s,l),v.fill(r,f),new fe({keys:[],programId:pn.programId,data:v})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:s}=e;se(t.length===mi,`Private key must be ${mi} bytes but received ${t.length} bytes`);try{const n=gr.fromSecretKey(t),a=n.publicKey.toBytes(),l=vs(r,n.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:l,instructionIndex:s})}catch(n){throw new Error(`Error creating instruction; ${n}`)}}}pn.programId=new L("Ed25519SigVerify111111111111111111111111111");const Yl=(i,e)=>{const t=ks.sign(i,e);return[t.toCompactRawBytes(),t.recovery]};ks.utils.isValidPrivateKey;const Zl=ks.getPublicKey,vi=32,Gn=20,Si=64,Jl=11,Yn=D([ne("numSignatures"),At("signatureOffset"),ne("signatureInstructionIndex"),At("ethAddressOffset"),ne("ethAddressInstructionIndex"),At("messageDataOffset"),At("messageDataSize"),ne("messageInstructionIndex"),ye(20,"ethAddress"),ye(64,"signature"),ne("recoveryId")]);class yr{constructor(){}static publicKeyToEthAddress(e){se(e.length===Si,`Public key must be ${Si} bytes but received ${e.length} bytes`);try{return H.Buffer.from(ti(J(e))).slice(-Gn)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:s,recoveryId:n,instructionIndex:a}=e;return yr.createInstructionWithEthAddress({ethAddress:yr.publicKeyToEthAddress(t),message:r,signature:s,recoveryId:n,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:s,recoveryId:n,instructionIndex:a=0}=e;let l;typeof t=="string"?t.startsWith("0x")?l=H.Buffer.from(t.substr(2),"hex"):l=H.Buffer.from(t,"hex"):l=t,se(l.length===Gn,`Address must be ${Gn} bytes but received ${l.length} bytes`);const f=1+Jl,w=f,v=f+l.length,A=v+s.length+1,B=1,S=H.Buffer.alloc(Yn.span+r.length);return Yn.encode({numSignatures:B,signatureOffset:v,signatureInstructionIndex:a,ethAddressOffset:w,ethAddressInstructionIndex:a,messageDataOffset:A,messageDataSize:r.length,messageInstructionIndex:a,signature:J(s),ethAddress:J(l),recoveryId:n},S),S.fill(J(r),Yn.span),new fe({keys:[],programId:yr.programId,data:S})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:s}=e;se(t.length===vi,`Private key must be ${vi} bytes but received ${t.length} bytes`);try{const n=J(t),a=Zl(n,!1).slice(1),l=H.Buffer.from(ti(J(r))),[f,w]=Yl(l,n);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:f,recoveryId:w,instructionIndex:s})}catch(n){throw new Error(`Error creating instruction; ${n}`)}}}yr.programId=new L("KeccakSecp256k11111111111111111111111111111");var Fo;const Wo=new L("StakeConfig11111111111111111111111111111111");class Do{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class zr{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}Fo=zr;zr.default=new Fo(0,0,L.default);class Xl{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=W("instruction").decode(e.data);let s;for(const[n,a]of Object.entries(st))if(a.index==r){s=n;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=ce(st.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Do(new L(t.staker),new L(t.withdrawer)),lockup:new zr(r.unixTimestamp,r.epoch,new L(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ce(st.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=ce(st.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new L(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:n}=ce(st.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new L(n),newAuthorizedPubkey:new L(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ce(st.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ce(st.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=ce(st.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ce(st.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(gn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const st=Object.freeze({Initialize:{index:0,layout:D([W("instruction"),ru(),nu()])},Authorize:{index:1,layout:D([W("instruction"),ee("newAuthorized"),W("stakeAuthorizationType")])},Delegate:{index:2,layout:D([W("instruction")])},Split:{index:3,layout:D([W("instruction"),St("lamports")])},Withdraw:{index:4,layout:D([W("instruction"),St("lamports")])},Deactivate:{index:5,layout:D([W("instruction")])},Merge:{index:7,layout:D([W("instruction")])},AuthorizeWithSeed:{index:8,layout:D([W("instruction"),ee("newAuthorized"),W("stakeAuthorizationType"),rr("authoritySeed"),ee("authorityOwner")])}}),Ql=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class gn{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:s}=e,n=s||zr.default,a=st.Initialize,l=re(a,{authorized:{staker:J(r.staker.toBuffer()),withdrawer:J(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:J(n.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:br,isSigner:!1,isWritable:!1}],programId:this.programId,data:l};return new fe(f)}static createAccountWithSeed(e){const t=new ae;t.add(it.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:n}=e;return t.add(this.initialize({stakePubkey:r,authorized:s,lockup:n}))}static createAccount(e){const t=new ae;t.add(it.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:n}=e;return t.add(this.initialize({stakePubkey:r,authorized:s,lockup:n}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:s}=e,n=st.Delegate,a=re(n);return new ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Tt,isSigner:!1,isWritable:!1},{pubkey:$r,isSigner:!1,isWritable:!1},{pubkey:Wo,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:n,custodianPubkey:a}=e,l=st.Authorize,f=re(l,{newAuthorized:J(s.toBuffer()),stakeAuthorizationType:n.index}),w=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Tt,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&w.push({pubkey:a,isSigner:!0,isWritable:!1}),new ae().add({keys:w,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:s,authorityOwner:n,newAuthorizedPubkey:a,stakeAuthorizationType:l,custodianPubkey:f}=e,w=st.AuthorizeWithSeed,v=re(w,{newAuthorized:J(a.toBuffer()),stakeAuthorizationType:l.index,authoritySeed:s,authorityOwner:J(n.toBuffer())}),A=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Tt,isSigner:!1,isWritable:!1}];return f&&A.push({pubkey:f,isSigner:!0,isWritable:!1}),new ae().add({keys:A,programId:this.programId,data:v})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:s,lamports:n}=e,a=st.Split,l=re(a,{lamports:n});return new fe({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static split(e,t){const r=new ae;return r.add(it.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:n,basePubkey:a,seed:l,lamports:f}=e,w=new ae;return w.add(it.allocate({accountPubkey:n,basePubkey:a,seed:l,space:this.space,programId:this.programId})),t&&t>0&&w.add(it.transfer({fromPubkey:e.authorizedPubkey,toPubkey:n,lamports:t})),w.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:n,lamports:f}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:s}=e,n=st.Merge,a=re(n);return new ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Tt,isSigner:!1,isWritable:!1},{pubkey:$r,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:s,lamports:n,custodianPubkey:a}=e,l=st.Withdraw,f=re(l,{lamports:n}),w=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Tt,isSigner:!1,isWritable:!1},{pubkey:$r,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&w.push({pubkey:a,isSigner:!0,isWritable:!1}),new ae().add({keys:w,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,s=st.Deactivate,n=re(s);return new ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Tt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}gn.programId=new L("Stake11111111111111111111111111111111111111");gn.space=200;class qo{constructor(e,t,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=s}}class eh{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=W("instruction").decode(e.data);let s;for(const[n,a]of Object.entries(Ot))if(a.index==r){s=n;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=ce(Ot.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new qo(new L(t.nodePubkey),new L(t.authorizedVoter),new L(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=ce(Ot.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new L(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:n}}=ce(Ot.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new L(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new L(s),voteAuthorizationType:{index:n},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=ce(Ot.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Er.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ot=Object.freeze({InitializeAccount:{index:0,layout:D([W("instruction"),su()])},Authorize:{index:1,layout:D([W("instruction"),ee("newAuthorized"),W("voteAuthorizationType")])},Withdraw:{index:3,layout:D([W("instruction"),St("lamports")])},UpdateValidatorIdentity:{index:4,layout:D([W("instruction")])},AuthorizeWithSeed:{index:10,layout:D([W("instruction"),iu()])}}),th=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Er{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:s}=e,n=Ot.InitializeAccount,a=re(n,{voteInit:{nodePubkey:J(s.nodePubkey.toBuffer()),authorizedVoter:J(s.authorizedVoter.toBuffer()),authorizedWithdrawer:J(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),l={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:br,isSigner:!1,isWritable:!1},{pubkey:Tt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new fe(l)}static createAccount(e){const t=new ae;return t.add(it.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:n}=e,a=Ot.Authorize,l=re(a,{newAuthorized:J(s.toBuffer()),voteAuthorizationType:n.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Tt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ae().add({keys:f,programId:this.programId,data:l})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:n,voteAuthorizationType:a,votePubkey:l}=e,f=Ot.AuthorizeWithSeed,w=re(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:J(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:J(n.toBuffer()),voteAuthorizationType:a.index}}),v=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:Tt,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new ae().add({keys:v,programId:this.programId,data:w})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:n}=e,a=Ot.Withdraw,l=re(a,{lamports:s}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new ae().add({keys:f,programId:this.programId,data:l})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Er.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:s}=e,n=Ot.UpdateValidatorIdentity,a=re(n),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ae().add({keys:l,programId:this.programId,data:a})}}Er.programId=new L("Vote111111111111111111111111111111111111111");Er.space=3762;const Vo=new L("Va1idator1nfo111111111111111111111111111111"),rh=M({name:T(),website:$(T()),details:$(T()),iconUrl:$(T()),keybaseUsername:$(T())});class Ls{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(wt(t)!==2)return null;const s=[];for(let n=0;n<2;n++){const a=new L(kt(t,0,Nt)),l=Lt(t)===1;s.push({publicKey:a,isSigner:l})}if(s[0].publicKey.equals(Vo)&&s[1].isSigner){const n=rr().decode(H.Buffer.from(t)),a=JSON.parse(n);return ao(a,rh),new Ls(s[1].publicKey,a)}return null}}const nh=new L("Vote111111111111111111111111111111111111111"),sh=D([ee("nodePubkey"),ee("authorizedWithdrawer"),ne("commission"),at(),lt(D([at("slot"),W("confirmationCount")]),Yt(W(),-8),"votes"),ne("rootSlotValid"),at("rootSlot"),at(),lt(D([at("epoch"),ee("authorizedVoter")]),Yt(W(),-8),"authorizedVoters"),D([lt(D([ee("authorizedPubkey"),at("epochOfLastAuthorizedSwitch"),at("targetEpoch")]),32,"buf"),at("idx"),ne("isEmpty")],"priorVoters"),at(),lt(D([at("epoch"),at("credits"),at("prevCredits")]),Yt(W(),-8),"epochCredits"),D([at("slot"),at("timestamp")],"lastTimestamp")]);class Cs{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const r=sh.decode(J(e),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new Cs({nodePubkey:new L(r.nodePubkey),authorizedWithdrawer:new L(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(ih),priorVoters:oh(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function ih({authorizedVoter:i,epoch:e}){return{epoch:e,authorizedVoter:new L(i)}}function _i({authorizedPubkey:i,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new L(i),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function oh({buf:i,idx:e,isEmpty:t}){return t?[]:[...i.slice(e+1).map(_i),...i.slice(0,e).map(_i)]}const Ii={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ah(i,e){const t=e===!1?"http":"https";if(!i)return Ii[t].devnet;const r=Ii[t][i];if(!r)throw new Error(`Unknown ${t} cluster: ${i}`);return r}async function ch(i,e,t,r){let s,n;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(s=t,n=r):n=t;const a=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,minContextSlot:n.minContextSlot},l=await i.sendRawTransaction(e,a),f=n&&n.commitment,v=(await(s?i.confirmTransaction(s,f):i.confirmTransaction(l,f))).value;if(v.err)throw l!=null?new Tr({action:a!=null&&a.skipPreflight?"send":"simulate",signature:l,transactionMessage:`Status: (${JSON.stringify(v)})`}):new Error(`Raw transaction ${l} failed (${JSON.stringify(v)})`);return l}const uh=1e9,ph=Object.freeze(Object.defineProperty({__proto__:null,Account:Qc,AddressLookupTableAccount:rs,AddressLookupTableInstruction:jl,AddressLookupTableProgram:Ps,Authorized:Do,BLOCKHASH_CACHE_TIMEOUT_MS:Mo,BPF_LOADER_DEPRECATED_PROGRAM_ID:eu,BPF_LOADER_PROGRAM_ID:bu,BpfLoader:wu,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Ct,ComputeBudgetInstruction:Gl,ComputeBudgetProgram:Ts,Connection:Hl,Ed25519Program:pn,Enum:Jc,EpochSchedule:Ro,FeeCalculatorLayout:Ao,Keypair:gr,LAMPORTS_PER_SOL:uh,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Vt,Loader:sr,Lockup:zr,MAX_SEED_LENGTH:So,Message:Pt,MessageAccountKeys:Pr,MessageV0:nr,NONCE_ACCOUNT_LENGTH:ts,NonceAccount:hn,PACKET_DATA_SIZE:Zt,PUBLIC_KEY_LENGTH:Nt,PublicKey:L,SIGNATURE_LENGTH_IN_BYTES:Mr,SOLANA_SCHEMA:Rr,STAKE_CONFIG_ID:Wo,STAKE_INSTRUCTION_LAYOUTS:st,SYSTEM_INSTRUCTION_LAYOUTS:pe,SYSVAR_CLOCK_PUBKEY:Tt,SYSVAR_EPOCH_SCHEDULE_PUBKEY:lu,SYSVAR_INSTRUCTIONS_PUBKEY:hu,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Vr,SYSVAR_RENT_PUBKEY:br,SYSVAR_REWARDS_PUBKEY:fu,SYSVAR_SLOT_HASHES_PUBKEY:du,SYSVAR_SLOT_HISTORY_PUBKEY:pu,SYSVAR_STAKE_HISTORY_PUBKEY:$r,Secp256k1Program:yr,SendTransactionError:Tr,SolanaJSONRPCError:q,SolanaJSONRPCErrorCode:gu,StakeAuthorizationLayout:Ql,StakeInstruction:Xl,StakeProgram:gn,Struct:Ss,SystemInstruction:yu,SystemProgram:it,Transaction:ae,TransactionExpiredBlockheightExceededError:_s,TransactionExpiredNonceInvalidError:fr,TransactionExpiredTimeoutError:Is,TransactionInstruction:fe,TransactionMessage:As,TransactionStatus:Wt,VALIDATOR_INFO_KEY:Vo,VERSION_PREFIX_MASK:un,VOTE_PROGRAM_ID:nh,ValidatorInfo:Ls,VersionedMessage:Es,VersionedTransaction:xs,VoteAccount:Cs,VoteAuthorizationLayout:th,VoteInit:qo,VoteInstruction:eh,VoteProgram:Er,clusterApiUrl:ah,sendAndConfirmRawTransaction:ch,sendAndConfirmTransaction:es},Symbol.toStringTag,{value:"Module"}));export{Do as A,Hl as C,gr as K,zr as L,L as P,gn as S,ae as T,xs as V,uh as a,ah as c,ph as i};
